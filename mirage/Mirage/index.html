<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Mirage (mirage.Mirage)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../index.html">mirage</a> &#x00BB; Mirage</nav><h1>Module <code>Mirage</code></h1><p>Mirage combinators.</p><p><code>Mirage</code> devices a set of devices and combinator to to define portable applications across all platforms that MirageOS supports.</p><p><em>Release v3.4.1</em></p><nav class="toc"><ul><li><a href="#general-mirage-devices">General mirage devices</a></li><li><a href="#time">Time</a></li><li><a href="#clocks">Clocks</a></li><li><a href="#log-reporters">Log reporters</a></li><li><a href="#random">Random</a></li><li><a href="#consoles">Consoles</a></li><li><a href="#block-devices">Block devices</a></li><li><a href="#static-key/value-stores">Static key/value stores</a></li><li><a href="#filesystem">Filesystem</a></li><li><a href="#generic-key/value-stores">Generic key/value stores</a></li><li><a href="#network-interfaces">Network interfaces</a></li><li><a href="#ethernet-configuration">Ethernet configuration</a></li><li><a href="#arp-configuration">ARP configuration</a></li><li><a href="#ip-configuration">IP configuration</a></li><li><a href="#udp-configuration">UDP configuration</a></li><li><a href="#tcp-configuration">TCP configuration</a></li><li><a href="#network-stack-configuration">Network stack configuration</a></li><li><a href="#resolver-configuration">Resolver configuration</a></li><li><a href="#syslog-configuration">Syslog configuration</a></li><li><a href="#entropy">Entropy</a></li><li><a href="#conduit-configuration">Conduit configuration</a></li><li><a href="#http-configuration">HTTP configuration</a></li><li><a href="#argv-configuration">Argv configuration</a></li><li><a href="#other-devices">Other devices</a></li><li><a href="#application-registering">Application registering</a></li></ul></nav></header><dl><dt class="spec module" id="module-Key"><a href="#module-Key" class="anchor"></a><code><span class="keyword">module </span><a href="Key/index.html">Key</a> : <span class="keyword">module type of </span><span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Configuration keys.</p></dd></dl><div><div class="spec include"><div class="doc"><details open="open"><summary><span class="def"><code><span class="keyword">include </span>Functoria_app.DSL</code></span></summary><dl><dt class="spec type" id="type-typ"><a href="#type-typ" class="anchor"></a><code><span class="keyword">type </span>'d typ</code><code><span class="keyword"> = </span><span class="type-var">'d</span> Functoria.typ</code><code><span class="keyword"> = </span></code><table class="variant"><tr id="type-typ.Type" class="anchored"><td class="def constructor"><a href="#type-typ.Type" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Type</span><span class="keyword"> : </span><span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-typ">typ</a></code></td></tr><tr id="type-typ.Function" class="anchored"><td class="def constructor"><a href="#type-typ.Function" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Function</span><span class="keyword"> : </span><span class="type-var">'b</span> <a href="index.html#type-typ">typ</a><span class="keyword"> * </span><span class="type-var">'c</span> <a href="index.html#type-typ">typ</a> <span>&#45;&gt;</span> (<span class="type-var">'b</span> <span>&#45;&gt;</span> <span class="type-var">'c</span>) <a href="index.html#type-typ">typ</a></code></td></tr></table></dt></dl><dl><dt class="spec value" id="val-typ"><a href="#val-typ" class="anchor"></a><code><span class="keyword">val </span>typ : <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-typ">typ</a></code></dt><dt class="spec value" id="val-(@-&gt;)"><a href="#val-(@-&gt;)" class="anchor"></a><code><span class="keyword">val </span>(@-&gt;) : <span class="type-var">'a</span> <a href="index.html#type-typ">typ</a> <span>&#45;&gt;</span> <span class="type-var">'b</span> <a href="index.html#type-typ">typ</a> <span>&#45;&gt;</span> (<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>) <a href="index.html#type-typ">typ</a></code></dt></dl><dl><dt class="spec type" id="type-job"><a href="#type-job" class="anchor"></a><code><span class="keyword">type </span>job</code><code><span class="keyword"> = </span>Functoria.job</code></dt></dl><dl><dt class="spec value" id="val-job"><a href="#val-job" class="anchor"></a><code><span class="keyword">val </span>job : <a href="index.html#type-job">job</a> <a href="index.html#type-typ">typ</a></code></dt></dl><dl><dt class="spec type" id="type-impl"><a href="#type-impl" class="anchor"></a><code><span class="keyword">type </span>'a impl</code><code><span class="keyword"> = </span><span class="type-var">'a</span> Functoria.impl</code></dt></dl><dl><dt class="spec value" id="val-($)"><a href="#val-($)" class="anchor"></a><code><span class="keyword">val </span>($) : (<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>) <a href="index.html#type-impl">impl</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-impl">impl</a> <span>&#45;&gt;</span> <span class="type-var">'b</span> <a href="index.html#type-impl">impl</a></code></dt></dl><dl><dt class="spec type" id="type-abstract_impl"><a href="#type-abstract_impl" class="anchor"></a><code><span class="keyword">type </span>abstract_impl</code><code><span class="keyword"> = </span>Functoria.abstract_impl</code><code><span class="keyword"> = </span></code><table class="variant"><tr id="type-abstract_impl.Abstract" class="anchored"><td class="def constructor"><a href="#type-abstract_impl.Abstract" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Abstract</span><span class="keyword"> : </span><span class="type-var">'a</span> <a href="index.html#type-impl">impl</a> <span>&#45;&gt;</span> <a href="index.html#type-abstract_impl">abstract_impl</a></code></td></tr></table></dt></dl><dl><dt class="spec value" id="val-abstract"><a href="#val-abstract" class="anchor"></a><code><span class="keyword">val </span>abstract : <span class="type-var">'a</span> <a href="index.html#type-impl">impl</a> <span>&#45;&gt;</span> <a href="index.html#type-abstract_impl">abstract_impl</a></code></dt></dl><dl><dt class="spec type" id="type-key"><a href="#type-key" class="anchor"></a><code><span class="keyword">type </span>key</code><code><span class="keyword"> = </span>Functoria_key.t</code></dt><dt class="spec type" id="type-context"><a href="#type-context" class="anchor"></a><code><span class="keyword">type </span>context</code><code><span class="keyword"> = </span>Functoria_key.context</code></dt><dt class="spec type" id="type-value"><a href="#type-value" class="anchor"></a><code><span class="keyword">type </span>'a value</code><code><span class="keyword"> = </span><span class="type-var">'a</span> Functoria_key.value</code></dt></dl><dl><dt class="spec value" id="val-if_impl"><a href="#val-if_impl" class="anchor"></a><code><span class="keyword">val </span>if_impl : bool <a href="index.html#type-value">value</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-impl">impl</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-impl">impl</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-impl">impl</a></code></dt><dt class="spec value" id="val-match_impl"><a href="#val-match_impl" class="anchor"></a><code><span class="keyword">val </span>match_impl : <span class="type-var">'b</span> <a href="index.html#type-value">value</a> <span>&#45;&gt;</span> default:<span class="type-var">'a</span> <a href="index.html#type-impl">impl</a> <span>&#45;&gt;</span> (<span class="type-var">'b</span><span class="keyword"> * </span><span class="type-var">'a</span> <a href="index.html#type-impl">impl</a>) list <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-impl">impl</a></code></dt></dl><div class="spec module-type" id="module-type-KEY"><a href="#module-type-KEY" class="anchor"></a><code><span class="keyword">module type </span><a href="module-type-KEY/index.html">KEY</a> = <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><dl><dt class="spec type" id="type-package"><a href="#type-package" class="anchor"></a><code><span class="keyword">type </span>package</code><code><span class="keyword"> = </span><span class="keyword">private </span>Functoria.package</code><code><span class="keyword"> = </span></code><code>{</code><table class="record"><tr id="type-package.opam" class="anchored"><td class="def field"><a href="#type-package.opam" class="anchor"></a><code>opam : string;</code></td></tr><tr id="type-package.pin" class="anchored"><td class="def field"><a href="#type-package.pin" class="anchor"></a><code>pin : string option;</code></td></tr><tr id="type-package.build" class="anchored"><td class="def field"><a href="#type-package.build" class="anchor"></a><code>build : bool;</code></td></tr><tr id="type-package.ocamlfind" class="anchored"><td class="def field"><a href="#type-package.ocamlfind" class="anchor"></a><code>ocamlfind : Astring.String.Set.t;</code></td></tr><tr id="type-package.min" class="anchored"><td class="def field"><a href="#type-package.min" class="anchor"></a><code>min : string option;</code></td></tr><tr id="type-package.max" class="anchored"><td class="def field"><a href="#type-package.max" class="anchor"></a><code>max : string option;</code></td></tr></table><code>}</code></dt></dl><dl><dt class="spec value" id="val-package"><a href="#val-package" class="anchor"></a><code><span class="keyword">val </span>package : ?&#8288;build:bool <span>&#45;&gt;</span> ?&#8288;sublibs:string list <span>&#45;&gt;</span> ?&#8288;ocamlfind:string list <span>&#45;&gt;</span> ?&#8288;min:string <span>&#45;&gt;</span> ?&#8288;max:string <span>&#45;&gt;</span> ?&#8288;pin:string <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <a href="index.html#type-package">package</a></code></dt><dt class="spec value" id="val-foreign"><a href="#val-foreign" class="anchor"></a><code><span class="keyword">val </span>foreign : ?&#8288;packages:<a href="index.html#type-package">package</a> list <span>&#45;&gt;</span> ?&#8288;keys:<a href="index.html#type-key">key</a> list <span>&#45;&gt;</span> ?&#8288;deps:<a href="index.html#type-abstract_impl">abstract_impl</a> list <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-typ">typ</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-impl">impl</a></code></dt></dl><div class="spec module" id="module-Info"><a href="#module-Info" class="anchor"></a><code><span class="keyword">module </span>Info = Functoria.Info</code></div><div class="spec class-type" id="class-type-configurable"><a href="#class-type-configurable" class="anchor"></a><code><span class="keyword">class type </span>'ty<a href="class-type-configurable/index.html">configurable</a> = <span class="keyword">object</span> ... <span class="keyword">end</span></code></div><dl><dt class="spec value" id="val-impl"><a href="#val-impl" class="anchor"></a><code><span class="keyword">val </span>impl : <span class="type-var">'a</span> <a href="class-type-configurable/index.html">configurable</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-impl">impl</a></code></dt></dl><div class="spec class" id="class-base_configurable"><a href="#class-base_configurable" class="anchor"></a><code><span class="keyword">class </span><a href="class-base_configurable/index.html">base_configurable</a> : <span class="keyword">object</span> ... <span class="keyword">end</span></code></div><div class="spec class" id="class-foreign"><a href="#class-foreign" class="anchor"></a><code><span class="keyword">class </span>'a<a href="class-foreign/index.html">foreign</a> : ?&#8288;packages:<a href="index.html#type-package">package</a> list <span>&#45;&gt;</span> ?&#8288;keys:<a href="index.html#type-key">key</a> list <span>&#45;&gt;</span> ?&#8288;deps:<a href="index.html#type-abstract_impl">abstract_impl</a> list <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-typ">typ</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="class-type-configurable/index.html">configurable</a></code></div><dl><dt class="spec value" id="val-hash"><a href="#val-hash" class="anchor"></a><code><span class="keyword">val </span>hash : <span class="type-var">'a</span> <a href="index.html#type-impl">impl</a> <span>&#45;&gt;</span> int</code></dt><dt class="spec value" id="val-equal"><a href="#val-equal" class="anchor"></a><code><span class="keyword">val </span>equal : <span class="type-var">'a</span> <a href="index.html#type-impl">impl</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-impl">impl</a> <span>&#45;&gt;</span> bool</code></dt></dl><div class="spec module" id="module-ImplTbl"><a href="#module-ImplTbl" class="anchor"></a><code><span class="keyword">module </span>ImplTbl = Functoria.ImplTbl</code></div><dl><dt class="spec value" id="val-explode"><a href="#val-explode" class="anchor"></a><code><span class="keyword">val </span>explode : <span class="type-var">'a</span> <a href="index.html#type-impl">impl</a> <span>&#45;&gt;</span> [ `App of <a href="index.html#type-abstract_impl">abstract_impl</a><span class="keyword"> * </span><a href="index.html#type-abstract_impl">abstract_impl</a><span class="keyword"> | </span>`If of bool <a href="index.html#type-value">value</a><span class="keyword"> * </span><span class="type-var">'a</span> <a href="index.html#type-impl">impl</a><span class="keyword"> * </span><span class="type-var">'a</span> <a href="index.html#type-impl">impl</a><span class="keyword"> | </span>`Impl of <span class="type-var">'a</span> <a href="class-type-configurable/index.html">configurable</a> ]</code></dt></dl></details></div></div></div><section><header><h2 id="general-mirage-devices"><a href="#general-mirage-devices" class="anchor"></a>General mirage devices</h2></header><dl><dt class="spec type" id="type-tracing"><a href="#type-tracing" class="anchor"></a><code><span class="keyword">type </span>tracing</code></dt><dd><p>The type for tracing.</p></dd></dl><dl><dt class="spec value" id="val-tracing"><a href="#val-tracing" class="anchor"></a><code><span class="keyword">val </span>tracing : <a href="index.html#type-tracing">tracing</a> <a href="index.html#type-typ">typ</a></code></dt><dd><p>Implementation of the <a href="index.html#type-tracing"><code>tracing</code></a> type.</p></dd></dl><dl><dt class="spec value" id="val-mprof_trace"><a href="#val-mprof_trace" class="anchor"></a><code><span class="keyword">val </span>mprof_trace : size:int <span>&#45;&gt;</span> unit <span>&#45;&gt;</span> <a href="index.html#type-tracing">tracing</a> <a href="index.html#type-impl">impl</a></code></dt><dd><p>Use mirage-profile to trace the unikernel. On Unix, this creates and mmaps a file called &quot;trace.ctf&quot;. On Xen, it shares the trace buffer with dom0.</p><dl><dt>parameter size:</dt><dd><p>size of the ring buffer to use.</p></dd></dl></dd></dl><dl><dt class="spec type" id="type-qubesdb"><a href="#type-qubesdb" class="anchor"></a><code><span class="keyword">type </span>qubesdb</code></dt></dl><dl><dt class="spec value" id="val-qubesdb"><a href="#val-qubesdb" class="anchor"></a><code><span class="keyword">val </span>qubesdb : <a href="index.html#type-qubesdb">qubesdb</a> <a href="index.html#type-typ">typ</a></code></dt><dd><p>For the Qubes target, the Qubes database from which to look up * dynamic runtime configuration information.</p></dd></dl><dl><dt class="spec value" id="val-default_qubesdb"><a href="#val-default_qubesdb" class="anchor"></a><code><span class="keyword">val </span>default_qubesdb : <a href="index.html#type-qubesdb">qubesdb</a> <a href="index.html#type-impl">impl</a></code></dt><dd><p>A default qubes database, guessed from the usual valid configurations.</p></dd></dl></section><section><header><h2 id="time"><a href="#time" class="anchor"></a>Time</h2></header><dl><dt class="spec type" id="type-time"><a href="#type-time" class="anchor"></a><code><span class="keyword">type </span>time</code></dt><dd><p>Abstract type for timers.</p></dd></dl><dl><dt class="spec value" id="val-time"><a href="#val-time" class="anchor"></a><code><span class="keyword">val </span>time : <a href="index.html#type-time">time</a> <a href="index.html#type-typ">typ</a></code></dt><dd><p>Implementations of the <code>Mirage_types.TIME</code> signature.</p></dd></dl><dl><dt class="spec value" id="val-default_time"><a href="#val-default_time" class="anchor"></a><code><span class="keyword">val </span>default_time : <a href="index.html#type-time">time</a> <a href="index.html#type-impl">impl</a></code></dt><dd><p>The default timer implementation.</p></dd></dl></section><section><header><h2 id="clocks"><a href="#clocks" class="anchor"></a>Clocks</h2></header><dl><dt class="spec type" id="type-pclock"><a href="#type-pclock" class="anchor"></a><code><span class="keyword">type </span>pclock</code></dt><dd><p>Abstract type for POSIX clocks.</p></dd></dl><dl><dt class="spec value" id="val-pclock"><a href="#val-pclock" class="anchor"></a><code><span class="keyword">val </span>pclock : <a href="index.html#type-pclock">pclock</a> <a href="index.html#type-typ">typ</a></code></dt><dd><p>Implementations of the <span class="xref-unresolved" title="unresolved reference to &quot;Mirage_types.PCLOCK&quot;"><code>Mirage_types</code>.PCLOCK</span> signature.</p></dd></dl><dl><dt class="spec value" id="val-default_posix_clock"><a href="#val-default_posix_clock" class="anchor"></a><code><span class="keyword">val </span>default_posix_clock : <a href="index.html#type-pclock">pclock</a> <a href="index.html#type-impl">impl</a></code></dt><dd><p>The default mirage-clock PCLOCK implementation.</p></dd></dl><dl><dt class="spec type" id="type-mclock"><a href="#type-mclock" class="anchor"></a><code><span class="keyword">type </span>mclock</code></dt><dd><p>Abstract type for monotonic clocks</p></dd></dl><dl><dt class="spec value" id="val-mclock"><a href="#val-mclock" class="anchor"></a><code><span class="keyword">val </span>mclock : <a href="index.html#type-mclock">mclock</a> <a href="index.html#type-typ">typ</a></code></dt><dd><p>Implementations of the <span class="xref-unresolved" title="unresolved reference to &quot;Mirage_types.MCLOCK&quot;"><code>Mirage_types</code>.MCLOCK</span> signature.</p></dd></dl><dl><dt class="spec value" id="val-default_monotonic_clock"><a href="#val-default_monotonic_clock" class="anchor"></a><code><span class="keyword">val </span>default_monotonic_clock : <a href="index.html#type-mclock">mclock</a> <a href="index.html#type-impl">impl</a></code></dt><dd><p>The default mirage-clock MCLOCK implementation.</p></dd></dl></section><section><header><h2 id="log-reporters"><a href="#log-reporters" class="anchor"></a>Log reporters</h2></header><dl><dt class="spec type" id="type-reporter"><a href="#type-reporter" class="anchor"></a><code><span class="keyword">type </span>reporter</code></dt><dd><p>The type for log reporters.</p></dd></dl><dl><dt class="spec value" id="val-reporter"><a href="#val-reporter" class="anchor"></a><code><span class="keyword">val </span>reporter : <a href="index.html#type-reporter">reporter</a> <a href="index.html#type-typ">typ</a></code></dt><dd><p>Implementation of the log <a href="index.html#type-reporter"><code>reporter</code></a> type.</p></dd></dl><dl><dt class="spec value" id="val-default_reporter"><a href="#val-default_reporter" class="anchor"></a><code><span class="keyword">val </span>default_reporter : ?&#8288;clock:<a href="index.html#type-pclock">pclock</a> <a href="index.html#type-impl">impl</a> <span>&#45;&gt;</span> ?&#8288;ring_size:int <span>&#45;&gt;</span> ?&#8288;level:Logs.level <span>&#45;&gt;</span> unit <span>&#45;&gt;</span> <a href="index.html#type-reporter">reporter</a> <a href="index.html#type-impl">impl</a></code></dt><dd><p><code>default_reporter ?clock ?level ()</code> is the log reporter that prints log messages to the console, timestampted with <code>clock</code>. If not provided, the default clock is <a href="index.html#val-default_posix_clock"><code>default_posix_clock</code></a>. <code>level</code> is the default log threshold. It is <code>Logs.Info</code> if not specified.</p></dd></dl><dl><dt class="spec value" id="val-no_reporter"><a href="#val-no_reporter" class="anchor"></a><code><span class="keyword">val </span>no_reporter : <a href="index.html#type-reporter">reporter</a> <a href="index.html#type-impl">impl</a></code></dt><dd><p><code>no_reporter</code> disable log reporting.</p></dd></dl></section><section><header><h2 id="random"><a href="#random" class="anchor"></a>Random</h2></header><dl><dt class="spec type" id="type-random"><a href="#type-random" class="anchor"></a><code><span class="keyword">type </span>random</code></dt><dd><p>Abstract type for random sources.</p></dd></dl><dl><dt class="spec value" id="val-random"><a href="#val-random" class="anchor"></a><code><span class="keyword">val </span>random : <a href="index.html#type-random">random</a> <a href="index.html#type-typ">typ</a></code></dt><dd><p>Implementations of the <code>Mirage_types.RANDOM</code> signature.</p></dd></dl><dl><dt class="spec value" id="val-stdlib_random"><a href="#val-stdlib_random" class="anchor"></a><code><span class="keyword">val </span>stdlib_random : <a href="index.html#type-random">random</a> <a href="index.html#type-impl">impl</a></code></dt><dd><p>Passthrough to the OCaml Random generator.</p></dd></dl><dl><dt class="spec value" id="val-nocrypto_random"><a href="#val-nocrypto_random" class="anchor"></a><code><span class="keyword">val </span>nocrypto_random : <a href="index.html#type-random">random</a> <a href="index.html#type-impl">impl</a></code></dt><dd><p>Passthrough to the Fortuna PRNG implemented in nocrypto.</p></dd></dl><dl><dt class="spec value" id="val-default_random"><a href="#val-default_random" class="anchor"></a><code><span class="keyword">val </span>default_random : <a href="index.html#type-random">random</a> <a href="index.html#type-impl">impl</a></code></dt><dd><p>Default PRNG device to be used in unikernels. It defaults to <code>stdlib</code>, but users can override using the <a href="Key/index.html#val-prng"><code>Key.prng</code></a> command line argument.</p></dd></dl></section><section><header><h2 id="consoles"><a href="#consoles" class="anchor"></a>Consoles</h2></header><dl><dt class="spec type" id="type-console"><a href="#type-console" class="anchor"></a><code><span class="keyword">type </span>console</code></dt><dd><p>Abstract type for consoles.</p></dd></dl><dl><dt class="spec value" id="val-console"><a href="#val-console" class="anchor"></a><code><span class="keyword">val </span>console : <a href="index.html#type-console">console</a> <a href="index.html#type-typ">typ</a></code></dt><dd><p>Implementations of the <code>Mirage_types.CONSOLE</code> signature.</p></dd></dl><dl><dt class="spec value" id="val-default_console"><a href="#val-default_console" class="anchor"></a><code><span class="keyword">val </span>default_console : <a href="index.html#type-console">console</a> <a href="index.html#type-impl">impl</a></code></dt><dd><p>Default console implementation.</p></dd></dl><dl><dt class="spec value" id="val-custom_console"><a href="#val-custom_console" class="anchor"></a><code><span class="keyword">val </span>custom_console : string <span>&#45;&gt;</span> <a href="index.html#type-console">console</a> <a href="index.html#type-impl">impl</a></code></dt><dd><p>Custom console implementation.</p></dd></dl></section><section><header><h2 id="block-devices"><a href="#block-devices" class="anchor"></a>Block devices</h2></header><dl><dt class="spec type" id="type-block"><a href="#type-block" class="anchor"></a><code><span class="keyword">type </span>block</code></dt><dd><p>Abstract type for raw block device configurations.</p></dd></dl><dl><dt class="spec value" id="val-block"><a href="#val-block" class="anchor"></a><code><span class="keyword">val </span>block : <a href="index.html#type-block">block</a> <a href="index.html#type-typ">typ</a></code></dt><dd><p>Implementations of the <code>Mirage_types.BLOCK</code> signature.</p></dd></dl><dl><dt class="spec value" id="val-block_of_file"><a href="#val-block_of_file" class="anchor"></a><code><span class="keyword">val </span>block_of_file : string <span>&#45;&gt;</span> <a href="index.html#type-block">block</a> <a href="index.html#type-impl">impl</a></code></dt><dd><p>Use the given file as a raw block device.</p></dd></dl><dl><dt class="spec value" id="val-block_of_xenstore_id"><a href="#val-block_of_xenstore_id" class="anchor"></a><code><span class="keyword">val </span>block_of_xenstore_id : string <span>&#45;&gt;</span> <a href="index.html#type-block">block</a> <a href="index.html#type-impl">impl</a></code></dt><dd><p>Use the given XenStore ID (ex: <code>/dev/xvdi1</code> or <code>51760</code>) as a raw block device.</p></dd></dl><dl><dt class="spec value" id="val-ramdisk"><a href="#val-ramdisk" class="anchor"></a><code><span class="keyword">val </span>ramdisk : string <span>&#45;&gt;</span> <a href="index.html#type-block">block</a> <a href="index.html#type-impl">impl</a></code></dt><dd><p>Use a ramdisk with the given name.</p></dd></dl><dl><dt class="spec value" id="val-generic_block"><a href="#val-generic_block" class="anchor"></a><code><span class="keyword">val </span>generic_block : ?&#8288;group:string <span>&#45;&gt;</span> ?&#8288;key:[ `XenstoreId<span class="keyword"> | </span>`BlockFile<span class="keyword"> | </span>`Ramdisk ] <a href="index.html#type-value">value</a> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <a href="index.html#type-block">block</a> <a href="index.html#type-impl">impl</a></code></dt></dl></section><section><header><h2 id="static-key/value-stores"><a href="#static-key/value-stores" class="anchor"></a>Static key/value stores</h2></header><dl><dt class="spec type" id="type-kv_ro"><a href="#type-kv_ro" class="anchor"></a><code><span class="keyword">type </span>kv_ro</code></dt><dd><p>Abstract type for read-only key/value store.</p></dd></dl><dl><dt class="spec value" id="val-kv_ro"><a href="#val-kv_ro" class="anchor"></a><code><span class="keyword">val </span>kv_ro : <a href="index.html#type-kv_ro">kv_ro</a> <a href="index.html#type-typ">typ</a></code></dt><dd><p>Implementations of the <code>Mirage_types.KV_RO</code> signature.</p></dd></dl><dl><dt class="spec value" id="val-crunch"><a href="#val-crunch" class="anchor"></a><code><span class="keyword">val </span>crunch : string <span>&#45;&gt;</span> <a href="index.html#type-kv_ro">kv_ro</a> <a href="index.html#type-impl">impl</a></code></dt><dd><p>Crunch a directory.</p></dd></dl><dl><dt class="spec value" id="val-archive"><a href="#val-archive" class="anchor"></a><code><span class="keyword">val </span>archive : <a href="index.html#type-block">block</a> <a href="index.html#type-impl">impl</a> <span>&#45;&gt;</span> <a href="index.html#type-kv_ro">kv_ro</a> <a href="index.html#type-impl">impl</a></code></dt><dt class="spec value" id="val-archive_of_files"><a href="#val-archive_of_files" class="anchor"></a><code><span class="keyword">val </span>archive_of_files : ?&#8288;dir:string <span>&#45;&gt;</span> unit <span>&#45;&gt;</span> <a href="index.html#type-kv_ro">kv_ro</a> <a href="index.html#type-impl">impl</a></code></dt><dt class="spec value" id="val-direct_kv_ro"><a href="#val-direct_kv_ro" class="anchor"></a><code><span class="keyword">val </span>direct_kv_ro : string <span>&#45;&gt;</span> <a href="index.html#type-kv_ro">kv_ro</a> <a href="index.html#type-impl">impl</a></code></dt><dd><p>Direct access to the underlying filesystem as a key/value store. For Xen backends, this is equivalent to <code>crunch</code>.</p></dd></dl></section><section><header><h2 id="filesystem"><a href="#filesystem" class="anchor"></a>Filesystem</h2></header><dl><dt class="spec type" id="type-fs"><a href="#type-fs" class="anchor"></a><code><span class="keyword">type </span>fs</code></dt><dd><p>Abstract type for filesystems.</p></dd></dl><dl><dt class="spec value" id="val-fs"><a href="#val-fs" class="anchor"></a><code><span class="keyword">val </span>fs : <a href="index.html#type-fs">fs</a> <a href="index.html#type-typ">typ</a></code></dt><dd><p>Implementations of the <code>Mirage_types.FS</code> signature.</p></dd></dl><dl><dt class="spec value" id="val-fat"><a href="#val-fat" class="anchor"></a><code><span class="keyword">val </span>fat : <a href="index.html#type-block">block</a> <a href="index.html#type-impl">impl</a> <span>&#45;&gt;</span> <a href="index.html#type-fs">fs</a> <a href="index.html#type-impl">impl</a></code></dt><dd><p>Consider a raw block device as a FAT filesystem.</p></dd></dl><dl><dt class="spec value" id="val-fat_of_files"><a href="#val-fat_of_files" class="anchor"></a><code><span class="keyword">val </span>fat_of_files : ?&#8288;dir:string <span>&#45;&gt;</span> ?&#8288;regexp:string <span>&#45;&gt;</span> unit <span>&#45;&gt;</span> <a href="index.html#type-fs">fs</a> <a href="index.html#type-impl">impl</a></code></dt><dd><p><code>fat_files dir ?dir ?regexp ()</code> collects all the files matching the shell pattern <code>regexp</code> in the directory <code>dir</code> into a FAT image. By default, <code>dir</code> is the current working directory and <code>regexp</code> is <i>*</i></p></dd></dl><dl><dt class="spec value" id="val-kv_ro_of_fs"><a href="#val-kv_ro_of_fs" class="anchor"></a><code><span class="keyword">val </span>kv_ro_of_fs : <a href="index.html#type-fs">fs</a> <a href="index.html#type-impl">impl</a> <span>&#45;&gt;</span> <a href="index.html#type-kv_ro">kv_ro</a> <a href="index.html#type-impl">impl</a></code></dt><dd><p>Consider a filesystem implementation as a read-only key/value store.</p></dd></dl></section><section><header><h2 id="generic-key/value-stores"><a href="#generic-key/value-stores" class="anchor"></a>Generic key/value stores</h2></header><dl><dt class="spec value" id="val-generic_kv_ro"><a href="#val-generic_kv_ro" class="anchor"></a><code><span class="keyword">val </span>generic_kv_ro : ?&#8288;group:string <span>&#45;&gt;</span> ?&#8288;key:[ `Archive<span class="keyword"> | </span>`Crunch<span class="keyword"> | </span>`Direct<span class="keyword"> | </span>`Fat ] <a href="index.html#type-value">value</a> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <a href="index.html#type-kv_ro">kv_ro</a> <a href="index.html#type-impl">impl</a></code></dt><dd><p>Generic key/value that will choose dynamically between <a href="index.html#val-fat"><code>fat</code></a>, <a href="index.html#val-archive"><code>archive</code></a> and <a href="index.html#val-crunch"><code>crunch</code></a>. To use a filesystem implementation, try <a href="index.html#val-kv_ro_of_fs"><code>kv_ro_of_fs</code></a>.</p><p>If no key is provided, it uses <a href="Key/index.html#val-kv_ro"><code>Key.kv_ro</code></a> to create a new one.</p></dd></dl></section><section><header><h2 id="network-interfaces"><a href="#network-interfaces" class="anchor"></a>Network interfaces</h2></header><dl><dt class="spec type" id="type-network"><a href="#type-network" class="anchor"></a><code><span class="keyword">type </span>network</code></dt><dd><p>Abstract type for network configurations.</p></dd></dl><dl><dt class="spec value" id="val-network"><a href="#val-network" class="anchor"></a><code><span class="keyword">val </span>network : <a href="index.html#type-network">network</a> <a href="index.html#type-typ">typ</a></code></dt><dd><p>Implementations of the <code>Mirage_types.NETWORK</code> signature.</p></dd></dl><dl><dt class="spec value" id="val-default_network"><a href="#val-default_network" class="anchor"></a><code><span class="keyword">val </span>default_network : <a href="index.html#type-network">network</a> <a href="index.html#type-impl">impl</a></code></dt><dd><p><code>default_network</code> is a dynamic network implementation * which attempts to do something reasonable based on the target.</p></dd></dl><dl><dt class="spec value" id="val-netif"><a href="#val-netif" class="anchor"></a><code><span class="keyword">val </span>netif : ?&#8288;group:string <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <a href="index.html#type-network">network</a> <a href="index.html#type-impl">impl</a></code></dt><dd><p>A custom network interface. Exposes a <a href="Key/index.html#val-interface"><code>Key.interface</code></a> key.</p></dd></dl></section><section><header><h2 id="ethernet-configuration"><a href="#ethernet-configuration" class="anchor"></a>Ethernet configuration</h2></header><dl><dt class="spec type" id="type-ethernet"><a href="#type-ethernet" class="anchor"></a><code><span class="keyword">type </span>ethernet</code></dt></dl><dl><dt class="spec value" id="val-ethernet"><a href="#val-ethernet" class="anchor"></a><code><span class="keyword">val </span>ethernet : <a href="index.html#type-ethernet">ethernet</a> <a href="index.html#type-typ">typ</a></code></dt><dd><p>Implementations of the <code>Mirage_types.ETHIF</code> signature.</p></dd></dl><dl><dt class="spec value" id="val-etif"><a href="#val-etif" class="anchor"></a><code><span class="keyword">val </span>etif : <a href="index.html#type-network">network</a> <a href="index.html#type-impl">impl</a> <span>&#45;&gt;</span> <a href="index.html#type-ethernet">ethernet</a> <a href="index.html#type-impl">impl</a></code></dt></dl></section><section><header><h2 id="arp-configuration"><a href="#arp-configuration" class="anchor"></a>ARP configuration</h2></header><dl><dt class="spec type" id="type-arpv4"><a href="#type-arpv4" class="anchor"></a><code><span class="keyword">type </span>arpv4</code></dt></dl><dl><dt class="spec value" id="val-arpv4"><a href="#val-arpv4" class="anchor"></a><code><span class="keyword">val </span>arpv4 : <a href="index.html#type-arpv4">arpv4</a> <a href="index.html#type-typ">typ</a></code></dt><dd><p>Implementation of the <code>Mirage_types.ARPV4</code> signature.</p></dd></dl><dl><dt class="spec value" id="val-arp"><a href="#val-arp" class="anchor"></a><code><span class="keyword">val </span>arp : ?&#8288;time:<a href="index.html#type-time">time</a> <a href="index.html#type-impl">impl</a> <span>&#45;&gt;</span> <a href="index.html#type-ethernet">ethernet</a> <a href="index.html#type-impl">impl</a> <span>&#45;&gt;</span> <a href="index.html#type-arpv4">arpv4</a> <a href="index.html#type-impl">impl</a></code></dt><dd><p>ARP implementation provided by the arp library</p></dd></dl></section><section><header><h2 id="ip-configuration"><a href="#ip-configuration" class="anchor"></a>IP configuration</h2><p>Implementations of the <code>Mirage_types.IP</code> signature.</p></header><dl><dt class="spec type" id="type-v4"><a href="#type-v4" class="anchor"></a><code><span class="keyword">type </span>v4</code></dt><dt class="spec type" id="type-v6"><a href="#type-v6" class="anchor"></a><code><span class="keyword">type </span>v6</code></dt><dt class="spec type" id="type-ip"><a href="#type-ip" class="anchor"></a><code><span class="keyword">type </span>'a ip</code></dt><dd><p>Abstract type for IP configurations.</p></dd></dl><dl><dt class="spec type" id="type-ipv4"><a href="#type-ipv4" class="anchor"></a><code><span class="keyword">type </span>ipv4</code><code><span class="keyword"> = </span><a href="index.html#type-v4">v4</a> <a href="index.html#type-ip">ip</a></code></dt><dt class="spec type" id="type-ipv6"><a href="#type-ipv6" class="anchor"></a><code><span class="keyword">type </span>ipv6</code><code><span class="keyword"> = </span><a href="index.html#type-v6">v6</a> <a href="index.html#type-ip">ip</a></code></dt></dl><dl><dt class="spec value" id="val-ipv4"><a href="#val-ipv4" class="anchor"></a><code><span class="keyword">val </span>ipv4 : <a href="index.html#type-ipv4">ipv4</a> <a href="index.html#type-typ">typ</a></code></dt><dd><p>The <code>Mirage_types.IPV4</code> module signature.</p></dd></dl><dl><dt class="spec value" id="val-ipv6"><a href="#val-ipv6" class="anchor"></a><code><span class="keyword">val </span>ipv6 : <a href="index.html#type-ipv6">ipv6</a> <a href="index.html#type-typ">typ</a></code></dt><dd><p>The <code>Mirage_types.IPV6</code> module signature.</p></dd></dl><dl><dt class="spec type" id="type-ipv4_config"><a href="#type-ipv4_config" class="anchor"></a><code><span class="keyword">type </span>ipv4_config</code><code><span class="keyword"> = </span></code><code>{</code><table class="record"><tr id="type-ipv4_config.network" class="anchored"><td class="def field"><a href="#type-ipv4_config.network" class="anchor"></a><code>network : Ipaddr.V4.Prefix.t<span class="keyword"> * </span>Ipaddr.V4.t;</code></td></tr><tr id="type-ipv4_config.gateway" class="anchored"><td class="def field"><a href="#type-ipv4_config.gateway" class="anchor"></a><code>gateway : Ipaddr.V4.t option;</code></td></tr></table><code>}</code></dt><dd><p>Types for IPv4 manual configuration.</p></dd></dl><dl><dt class="spec type" id="type-ipv6_config"><a href="#type-ipv6_config" class="anchor"></a><code><span class="keyword">type </span>ipv6_config</code><code><span class="keyword"> = </span></code><code>{</code><table class="record"><tr id="type-ipv6_config.addresses" class="anchored"><td class="def field"><a href="#type-ipv6_config.addresses" class="anchor"></a><code>addresses : Ipaddr.V6.t list;</code></td></tr><tr id="type-ipv6_config.netmasks" class="anchored"><td class="def field"><a href="#type-ipv6_config.netmasks" class="anchor"></a><code>netmasks : Ipaddr.V6.Prefix.t list;</code></td></tr><tr id="type-ipv6_config.gateways" class="anchored"><td class="def field"><a href="#type-ipv6_config.gateways" class="anchor"></a><code>gateways : Ipaddr.V6.t list;</code></td></tr></table><code>}</code></dt><dd><p>Types for IP manual configuration.</p></dd></dl><dl><dt class="spec value" id="val-create_ipv4"><a href="#val-create_ipv4" class="anchor"></a><code><span class="keyword">val </span>create_ipv4 : ?&#8288;group:string <span>&#45;&gt;</span> ?&#8288;config:<a href="index.html#type-ipv4_config">ipv4_config</a> <span>&#45;&gt;</span> ?&#8288;random:<a href="index.html#type-random">random</a> <a href="index.html#type-impl">impl</a> <span>&#45;&gt;</span> ?&#8288;clock:<a href="index.html#type-mclock">mclock</a> <a href="index.html#type-impl">impl</a> <span>&#45;&gt;</span> <a href="index.html#type-ethernet">ethernet</a> <a href="index.html#type-impl">impl</a> <span>&#45;&gt;</span> <a href="index.html#type-arpv4">arpv4</a> <a href="index.html#type-impl">impl</a> <span>&#45;&gt;</span> <a href="index.html#type-ipv4">ipv4</a> <a href="index.html#type-impl">impl</a></code></dt><dd><p>Use an IPv4 address Exposes the keys <a href="../Mirage_key/V4/index.html#val-network"><code>Key.V4.network</code></a> and <a href="../Mirage_key/V4/index.html#val-gateway"><code>Key.V4.gateway</code></a>. If provided, the values of these keys will override those supplied in the ipv4 configuration record, if that has been provided.</p></dd></dl><dl><dt class="spec value" id="val-ipv4_qubes"><a href="#val-ipv4_qubes" class="anchor"></a><code><span class="keyword">val </span>ipv4_qubes : ?&#8288;random:<a href="index.html#type-random">random</a> <a href="index.html#type-impl">impl</a> <span>&#45;&gt;</span> ?&#8288;clock:<a href="index.html#type-mclock">mclock</a> <a href="index.html#type-impl">impl</a> <span>&#45;&gt;</span> <a href="index.html#type-qubesdb">qubesdb</a> <a href="index.html#type-impl">impl</a> <span>&#45;&gt;</span> <a href="index.html#type-ethernet">ethernet</a> <a href="index.html#type-impl">impl</a> <span>&#45;&gt;</span> <a href="index.html#type-arpv4">arpv4</a> <a href="index.html#type-impl">impl</a> <span>&#45;&gt;</span> <a href="index.html#type-ipv4">ipv4</a> <a href="index.html#type-impl">impl</a></code></dt><dd><p>Use a given initialized QubesDB to look up and configure the appropriate * IPv4 interface.</p></dd></dl><dl><dt class="spec value" id="val-create_ipv6"><a href="#val-create_ipv6" class="anchor"></a><code><span class="keyword">val </span>create_ipv6 : ?&#8288;random:<a href="index.html#type-random">random</a> <a href="index.html#type-impl">impl</a> <span>&#45;&gt;</span> ?&#8288;time:<a href="index.html#type-time">time</a> <a href="index.html#type-impl">impl</a> <span>&#45;&gt;</span> ?&#8288;clock:<a href="index.html#type-mclock">mclock</a> <a href="index.html#type-impl">impl</a> <span>&#45;&gt;</span> ?&#8288;group:string <span>&#45;&gt;</span> <a href="index.html#type-ethernet">ethernet</a> <a href="index.html#type-impl">impl</a> <span>&#45;&gt;</span> <a href="index.html#type-ipv6_config">ipv6_config</a> <span>&#45;&gt;</span> <a href="index.html#type-ipv6">ipv6</a> <a href="index.html#type-impl">impl</a></code></dt><dd><p>Use an IPv6 address. Exposes the keys <a href="../Mirage_key/V6/index.html#val-ips"><code>Key.V6.ips</code></a>, <a href="../Mirage_key/V6/index.html#val-netmasks"><code>Key.V6.netmasks</code></a> and <a href="../Mirage_key/V6/index.html#val-gateways"><code>Key.V6.gateways</code></a>.</p></dd></dl></section><section><header><h2 id="udp-configuration"><a href="#udp-configuration" class="anchor"></a>UDP configuration</h2></header><dl><dt class="spec type" id="type-udp"><a href="#type-udp" class="anchor"></a><code><span class="keyword">type </span>'a udp</code></dt><dt class="spec type" id="type-udpv4"><a href="#type-udpv4" class="anchor"></a><code><span class="keyword">type </span>udpv4</code><code><span class="keyword"> = </span><a href="index.html#type-v4">v4</a> <a href="index.html#type-udp">udp</a></code></dt><dt class="spec type" id="type-udpv6"><a href="#type-udpv6" class="anchor"></a><code><span class="keyword">type </span>udpv6</code><code><span class="keyword"> = </span><a href="index.html#type-v6">v6</a> <a href="index.html#type-udp">udp</a></code></dt></dl><dl><dt class="spec value" id="val-udp"><a href="#val-udp" class="anchor"></a><code><span class="keyword">val </span>udp : <span class="type-var">'a</span> <a href="index.html#type-udp">udp</a> <a href="index.html#type-typ">typ</a></code></dt><dd><p>Implementation of the <code>Mirage_types.UDP</code> signature.</p></dd></dl><dl><dt class="spec value" id="val-udpv4"><a href="#val-udpv4" class="anchor"></a><code><span class="keyword">val </span>udpv4 : <a href="index.html#type-udpv4">udpv4</a> <a href="index.html#type-typ">typ</a></code></dt><dt class="spec value" id="val-udpv6"><a href="#val-udpv6" class="anchor"></a><code><span class="keyword">val </span>udpv6 : <a href="index.html#type-udpv6">udpv6</a> <a href="index.html#type-typ">typ</a></code></dt><dt class="spec value" id="val-direct_udp"><a href="#val-direct_udp" class="anchor"></a><code><span class="keyword">val </span>direct_udp : ?&#8288;random:<a href="index.html#type-random">random</a> <a href="index.html#type-impl">impl</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-ip">ip</a> <a href="index.html#type-impl">impl</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-udp">udp</a> <a href="index.html#type-impl">impl</a></code></dt><dt class="spec value" id="val-socket_udpv4"><a href="#val-socket_udpv4" class="anchor"></a><code><span class="keyword">val </span>socket_udpv4 : ?&#8288;group:string <span>&#45;&gt;</span> Ipaddr.V4.t option <span>&#45;&gt;</span> <a href="index.html#type-udpv4">udpv4</a> <a href="index.html#type-impl">impl</a></code></dt></dl></section><section><header><h2 id="tcp-configuration"><a href="#tcp-configuration" class="anchor"></a>TCP configuration</h2></header><dl><dt class="spec type" id="type-tcp"><a href="#type-tcp" class="anchor"></a><code><span class="keyword">type </span>'a tcp</code></dt><dt class="spec type" id="type-tcpv4"><a href="#type-tcpv4" class="anchor"></a><code><span class="keyword">type </span>tcpv4</code><code><span class="keyword"> = </span><a href="index.html#type-v4">v4</a> <a href="index.html#type-tcp">tcp</a></code></dt><dt class="spec type" id="type-tcpv6"><a href="#type-tcpv6" class="anchor"></a><code><span class="keyword">type </span>tcpv6</code><code><span class="keyword"> = </span><a href="index.html#type-v6">v6</a> <a href="index.html#type-tcp">tcp</a></code></dt></dl><dl><dt class="spec value" id="val-tcp"><a href="#val-tcp" class="anchor"></a><code><span class="keyword">val </span>tcp : <span class="type-var">'a</span> <a href="index.html#type-tcp">tcp</a> <a href="index.html#type-typ">typ</a></code></dt><dd><p>Implementation of the <code>Mirage_types.TCP</code> signature.</p></dd></dl><dl><dt class="spec value" id="val-tcpv4"><a href="#val-tcpv4" class="anchor"></a><code><span class="keyword">val </span>tcpv4 : <a href="index.html#type-tcpv4">tcpv4</a> <a href="index.html#type-typ">typ</a></code></dt><dt class="spec value" id="val-tcpv6"><a href="#val-tcpv6" class="anchor"></a><code><span class="keyword">val </span>tcpv6 : <a href="index.html#type-tcpv6">tcpv6</a> <a href="index.html#type-typ">typ</a></code></dt><dt class="spec value" id="val-direct_tcp"><a href="#val-direct_tcp" class="anchor"></a><code><span class="keyword">val </span>direct_tcp : ?&#8288;clock:<a href="index.html#type-mclock">mclock</a> <a href="index.html#type-impl">impl</a> <span>&#45;&gt;</span> ?&#8288;random:<a href="index.html#type-random">random</a> <a href="index.html#type-impl">impl</a> <span>&#45;&gt;</span> ?&#8288;time:<a href="index.html#type-time">time</a> <a href="index.html#type-impl">impl</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-ip">ip</a> <a href="index.html#type-impl">impl</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-tcp">tcp</a> <a href="index.html#type-impl">impl</a></code></dt><dt class="spec value" id="val-socket_tcpv4"><a href="#val-socket_tcpv4" class="anchor"></a><code><span class="keyword">val </span>socket_tcpv4 : ?&#8288;group:string <span>&#45;&gt;</span> Ipaddr.V4.t option <span>&#45;&gt;</span> <a href="index.html#type-tcpv4">tcpv4</a> <a href="index.html#type-impl">impl</a></code></dt></dl></section><section><header><h2 id="network-stack-configuration"><a href="#network-stack-configuration" class="anchor"></a>Network stack configuration</h2></header><dl><dt class="spec type" id="type-stackv4"><a href="#type-stackv4" class="anchor"></a><code><span class="keyword">type </span>stackv4</code></dt></dl><dl><dt class="spec value" id="val-stackv4"><a href="#val-stackv4" class="anchor"></a><code><span class="keyword">val </span>stackv4 : <a href="index.html#type-stackv4">stackv4</a> <a href="index.html#type-typ">typ</a></code></dt><dd><p>Implementation of the <code>Mirage_types.STACKV4</code> signature.</p></dd></dl><dl><dt class="spec value" id="val-direct_stackv4"><a href="#val-direct_stackv4" class="anchor"></a><code><span class="keyword">val </span>direct_stackv4 : ?&#8288;clock:<a href="index.html#type-mclock">mclock</a> <a href="index.html#type-impl">impl</a> <span>&#45;&gt;</span> ?&#8288;random:<a href="index.html#type-random">random</a> <a href="index.html#type-impl">impl</a> <span>&#45;&gt;</span> ?&#8288;time:<a href="index.html#type-time">time</a> <a href="index.html#type-impl">impl</a> <span>&#45;&gt;</span> ?&#8288;group:string <span>&#45;&gt;</span> <a href="index.html#type-network">network</a> <a href="index.html#type-impl">impl</a> <span>&#45;&gt;</span> <a href="index.html#type-ethernet">ethernet</a> <a href="index.html#type-impl">impl</a> <span>&#45;&gt;</span> <a href="index.html#type-arpv4">arpv4</a> <a href="index.html#type-impl">impl</a> <span>&#45;&gt;</span> <a href="index.html#type-ipv4">ipv4</a> <a href="index.html#type-impl">impl</a> <span>&#45;&gt;</span> <a href="index.html#type-stackv4">stackv4</a> <a href="index.html#type-impl">impl</a></code></dt><dd><p>Direct network stack with given ip.</p></dd></dl><dl><dt class="spec value" id="val-socket_stackv4"><a href="#val-socket_stackv4" class="anchor"></a><code><span class="keyword">val </span>socket_stackv4 : ?&#8288;group:string <span>&#45;&gt;</span> Ipaddr.V4.t list <span>&#45;&gt;</span> <a href="index.html#type-stackv4">stackv4</a> <a href="index.html#type-impl">impl</a></code></dt><dd><p>Network stack with sockets. Exposes the key <span class="xref-unresolved" title="unresolved reference to &quot;Key.V4.interfaces&quot;"><a href="Key/index.html#module-V4"><code>Key.V4</code></a>.interfaces</span>.</p></dd></dl><dl><dt class="spec value" id="val-qubes_ipv4_stack"><a href="#val-qubes_ipv4_stack" class="anchor"></a><code><span class="keyword">val </span>qubes_ipv4_stack : ?&#8288;group:string <span>&#45;&gt;</span> ?&#8288;qubesdb:<a href="index.html#type-qubesdb">qubesdb</a> <a href="index.html#type-impl">impl</a> <span>&#45;&gt;</span> ?&#8288;arp:(<a href="index.html#type-ethernet">ethernet</a> <a href="index.html#type-impl">impl</a> <span>&#45;&gt;</span> <a href="index.html#type-arpv4">arpv4</a> <a href="index.html#type-impl">impl</a>) <span>&#45;&gt;</span> <a href="index.html#type-network">network</a> <a href="index.html#type-impl">impl</a> <span>&#45;&gt;</span> <a href="index.html#type-stackv4">stackv4</a> <a href="index.html#type-impl">impl</a></code></dt><dd><p>Build a stackv4 by looking up configuration information via QubesDB, * building an ipv4, then building a stack on top of that.</p></dd></dl><dl><dt class="spec value" id="val-dhcp_ipv4_stack"><a href="#val-dhcp_ipv4_stack" class="anchor"></a><code><span class="keyword">val </span>dhcp_ipv4_stack : ?&#8288;group:string <span>&#45;&gt;</span> ?&#8288;random:<a href="index.html#type-random">random</a> <a href="index.html#type-impl">impl</a> <span>&#45;&gt;</span> ?&#8288;time:<a href="index.html#type-time">time</a> <a href="index.html#type-impl">impl</a> <span>&#45;&gt;</span> ?&#8288;arp:(<a href="index.html#type-ethernet">ethernet</a> <a href="index.html#type-impl">impl</a> <span>&#45;&gt;</span> <a href="index.html#type-arpv4">arpv4</a> <a href="index.html#type-impl">impl</a>) <span>&#45;&gt;</span> <a href="index.html#type-network">network</a> <a href="index.html#type-impl">impl</a> <span>&#45;&gt;</span> <a href="index.html#type-stackv4">stackv4</a> <a href="index.html#type-impl">impl</a></code></dt><dd><p>Build a stackv4 by obtaining a DHCP lease, using the lease to * build an ipv4, then building a stack on top of that.</p></dd></dl><dl><dt class="spec value" id="val-static_ipv4_stack"><a href="#val-static_ipv4_stack" class="anchor"></a><code><span class="keyword">val </span>static_ipv4_stack : ?&#8288;group:string <span>&#45;&gt;</span> ?&#8288;config:<a href="index.html#type-ipv4_config">ipv4_config</a> <span>&#45;&gt;</span> ?&#8288;arp:(<a href="index.html#type-ethernet">ethernet</a> <a href="index.html#type-impl">impl</a> <span>&#45;&gt;</span> <a href="index.html#type-arpv4">arpv4</a> <a href="index.html#type-impl">impl</a>) <span>&#45;&gt;</span> <a href="index.html#type-network">network</a> <a href="index.html#type-impl">impl</a> <span>&#45;&gt;</span> <a href="index.html#type-stackv4">stackv4</a> <a href="index.html#type-impl">impl</a></code></dt><dd><p>Build a stackv4 by checking the <a href="../Mirage_key/V4/index.html#val-network"><code>Key.V4.network</code></a>, and <a href="../Mirage_key/V4/index.html#val-gateway"><code>Key.V4.gateway</code></a> keys * for ipv4 configuration information, filling in unspecified information from <code>?config</code>, * then building a stack on top of that.</p></dd></dl><dl><dt class="spec value" id="val-generic_stackv4"><a href="#val-generic_stackv4" class="anchor"></a><code><span class="keyword">val </span>generic_stackv4 : ?&#8288;group:string <span>&#45;&gt;</span> ?&#8288;config:<a href="index.html#type-ipv4_config">ipv4_config</a> <span>&#45;&gt;</span> ?&#8288;dhcp_key:bool <a href="index.html#type-value">value</a> <span>&#45;&gt;</span> ?&#8288;net_key:[ `Direct<span class="keyword"> | </span>`Socket ] option <a href="index.html#type-value">value</a> <span>&#45;&gt;</span> <a href="index.html#type-network">network</a> <a href="index.html#type-impl">impl</a> <span>&#45;&gt;</span> <a href="index.html#type-stackv4">stackv4</a> <a href="index.html#type-impl">impl</a></code></dt><dd><p>Generic stack using a <code>dhcp</code> and a <code>net</code> keys: <a href="Key/index.html#val-net"><code>Key.net</code></a> and <a href="Key/index.html#val-dhcp"><code>Key.dhcp</code></a>.</p><ul><li>If <code>target</code> = <code>Qubes</code> then <a href="index.html#val-qubes_ipv4_stack"><code>qubes_ipv4_stack</code></a> is used</li><li>Else, if <code>net</code> = <code>socket</code> then <a href="index.html#val-socket_stackv4"><code>socket_stackv4</code></a> is used</li><li>Else, if <code>dhcp</code> then <a href="index.html#val-dhcp_ipv4_stack"><code>dhcp_ipv4_stack</code></a> is used</li><li>Else, if <code>unix or macosx</code> then <a href="index.html#val-socket_stackv4"><code>socket_stackv4</code></a> is used</li><li>Else, <a href="index.html#val-static_ipv4_stack"><code>static_ipv4_stack</code></a> is used.</li></ul><p>If a key is not provided, it uses <a href="Key/index.html#val-net"><code>Key.net</code></a> or <a href="Key/index.html#val-dhcp"><code>Key.dhcp</code></a> (with the <code>group</code> argument) to create it.</p></dd></dl></section><section><header><h2 id="resolver-configuration"><a href="#resolver-configuration" class="anchor"></a>Resolver configuration</h2></header><dl><dt class="spec type" id="type-resolver"><a href="#type-resolver" class="anchor"></a><code><span class="keyword">type </span>resolver</code></dt></dl><dl><dt class="spec value" id="val-resolver"><a href="#val-resolver" class="anchor"></a><code><span class="keyword">val </span>resolver : <a href="index.html#type-resolver">resolver</a> <a href="index.html#type-typ">typ</a></code></dt><dt class="spec value" id="val-resolver_dns"><a href="#val-resolver_dns" class="anchor"></a><code><span class="keyword">val </span>resolver_dns : ?&#8288;ns:Ipaddr.V4.t <span>&#45;&gt;</span> ?&#8288;ns_port:int <span>&#45;&gt;</span> ?&#8288;time:<a href="index.html#type-time">time</a> <a href="index.html#type-impl">impl</a> <span>&#45;&gt;</span> <a href="index.html#type-stackv4">stackv4</a> <a href="index.html#type-impl">impl</a> <span>&#45;&gt;</span> <a href="index.html#type-resolver">resolver</a> <a href="index.html#type-impl">impl</a></code></dt><dt class="spec value" id="val-resolver_unix_system"><a href="#val-resolver_unix_system" class="anchor"></a><code><span class="keyword">val </span>resolver_unix_system : <a href="index.html#type-resolver">resolver</a> <a href="index.html#type-impl">impl</a></code></dt></dl></section><section><header><h2 id="syslog-configuration"><a href="#syslog-configuration" class="anchor"></a>Syslog configuration</h2></header><aside><p>Syslog exfiltrates log messages (generated by libraries using the <code>logs</code> library) via a network connection. The log level of the log sources is controlled via the <a href="../Mirage_key/index.html#val-logs"><code>Mirage_key.logs</code></a> key. The functionality is provided by the <code>logs-syslog</code> package.</p></aside><dl><dt class="spec type" id="type-syslog_config"><a href="#type-syslog_config" class="anchor"></a><code><span class="keyword">type </span>syslog_config</code><code><span class="keyword"> = </span></code><code>{</code><table class="record"><tr id="type-syslog_config.hostname" class="anchored"><td class="def field"><a href="#type-syslog_config.hostname" class="anchor"></a><code>hostname : string;</code></td></tr><tr id="type-syslog_config.server" class="anchored"><td class="def field"><a href="#type-syslog_config.server" class="anchor"></a><code>server : Ipaddr.V4.t option;</code></td></tr><tr id="type-syslog_config.port" class="anchored"><td class="def field"><a href="#type-syslog_config.port" class="anchor"></a><code>port : int option;</code></td></tr><tr id="type-syslog_config.truncate" class="anchored"><td class="def field"><a href="#type-syslog_config.truncate" class="anchor"></a><code>truncate : int option;</code></td></tr></table><code>}</code></dt></dl><dl><dt class="spec value" id="val-syslog_config"><a href="#val-syslog_config" class="anchor"></a><code><span class="keyword">val </span>syslog_config : ?&#8288;port:int <span>&#45;&gt;</span> ?&#8288;truncate:int <span>&#45;&gt;</span> ?&#8288;server:Ipaddr.V4.t <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <a href="index.html#type-syslog_config">syslog_config</a></code></dt><dd><p>Helper for constructing a <a href="index.html#type-syslog_config"><code>syslog_config</code></a>.</p></dd></dl><dl><dt class="spec type" id="type-syslog"><a href="#type-syslog" class="anchor"></a><code><span class="keyword">type </span>syslog</code></dt><dd><p>The type for syslog</p></dd></dl><dl><dt class="spec value" id="val-syslog"><a href="#val-syslog" class="anchor"></a><code><span class="keyword">val </span>syslog : <a href="index.html#type-syslog">syslog</a> <a href="index.html#type-typ">typ</a></code></dt><dd><p>Implementation of the <a href="index.html#type-syslog"><code>syslog</code></a> type.</p></dd></dl><dl><dt class="spec value" id="val-syslog_udp"><a href="#val-syslog_udp" class="anchor"></a><code><span class="keyword">val </span>syslog_udp : ?&#8288;config:<a href="index.html#type-syslog_config">syslog_config</a> <span>&#45;&gt;</span> ?&#8288;console:<a href="index.html#type-console">console</a> <a href="index.html#type-impl">impl</a> <span>&#45;&gt;</span> ?&#8288;clock:<a href="index.html#type-pclock">pclock</a> <a href="index.html#type-impl">impl</a> <span>&#45;&gt;</span> <a href="index.html#type-stackv4">stackv4</a> <a href="index.html#type-impl">impl</a> <span>&#45;&gt;</span> <a href="index.html#type-syslog">syslog</a> <a href="index.html#type-impl">impl</a></code></dt><dd><p>Emit log messages via UDP to the configured host.</p></dd></dl><dl><dt class="spec value" id="val-syslog_tcp"><a href="#val-syslog_tcp" class="anchor"></a><code><span class="keyword">val </span>syslog_tcp : ?&#8288;config:<a href="index.html#type-syslog_config">syslog_config</a> <span>&#45;&gt;</span> ?&#8288;console:<a href="index.html#type-console">console</a> <a href="index.html#type-impl">impl</a> <span>&#45;&gt;</span> ?&#8288;clock:<a href="index.html#type-pclock">pclock</a> <a href="index.html#type-impl">impl</a> <span>&#45;&gt;</span> <a href="index.html#type-stackv4">stackv4</a> <a href="index.html#type-impl">impl</a> <span>&#45;&gt;</span> <a href="index.html#type-syslog">syslog</a> <a href="index.html#type-impl">impl</a></code></dt><dd><p>Emit log messages via TCP to the configured host.</p></dd></dl><dl><dt class="spec value" id="val-syslog_tls"><a href="#val-syslog_tls" class="anchor"></a><code><span class="keyword">val </span>syslog_tls : ?&#8288;config:<a href="index.html#type-syslog_config">syslog_config</a> <span>&#45;&gt;</span> ?&#8288;keyname:string <span>&#45;&gt;</span> ?&#8288;console:<a href="index.html#type-console">console</a> <a href="index.html#type-impl">impl</a> <span>&#45;&gt;</span> ?&#8288;clock:<a href="index.html#type-pclock">pclock</a> <a href="index.html#type-impl">impl</a> <span>&#45;&gt;</span> <a href="index.html#type-stackv4">stackv4</a> <a href="index.html#type-impl">impl</a> <span>&#45;&gt;</span> <a href="index.html#type-kv_ro">kv_ro</a> <a href="index.html#type-impl">impl</a> <span>&#45;&gt;</span> <a href="index.html#type-syslog">syslog</a> <a href="index.html#type-impl">impl</a></code></dt><dd><p>Emit log messages via TLS to the configured host, using the credentials (private ekey, certificate, trust anchor) provided in the KV_RO using the <code>keyname</code>.</p></dd></dl></section><section><header><h2 id="entropy"><a href="#entropy" class="anchor"></a>Entropy</h2></header><dl><dt class="spec value" id="val-nocrypto"><a href="#val-nocrypto" class="anchor"></a><code><span class="keyword">val </span>nocrypto : <a href="index.html#type-job">job</a> <a href="index.html#type-impl">impl</a></code></dt><dd><p>Device that initializes the entropy.</p></dd></dl></section><section><header><h2 id="conduit-configuration"><a href="#conduit-configuration" class="anchor"></a>Conduit configuration</h2></header><dl><dt class="spec type" id="type-conduit"><a href="#type-conduit" class="anchor"></a><code><span class="keyword">type </span>conduit</code></dt></dl><dl><dt class="spec value" id="val-conduit"><a href="#val-conduit" class="anchor"></a><code><span class="keyword">val </span>conduit : <a href="index.html#type-conduit">conduit</a> <a href="index.html#type-typ">typ</a></code></dt><dt class="spec value" id="val-conduit_direct"><a href="#val-conduit_direct" class="anchor"></a><code><span class="keyword">val </span>conduit_direct : ?&#8288;tls:bool <span>&#45;&gt;</span> <a href="index.html#type-stackv4">stackv4</a> <a href="index.html#type-impl">impl</a> <span>&#45;&gt;</span> <a href="index.html#type-conduit">conduit</a> <a href="index.html#type-impl">impl</a></code></dt></dl></section><section><header><h2 id="http-configuration"><a href="#http-configuration" class="anchor"></a>HTTP configuration</h2></header><dl><dt class="spec type" id="type-http"><a href="#type-http" class="anchor"></a><code><span class="keyword">type </span>http</code></dt></dl><dl><dt class="spec value" id="val-http"><a href="#val-http" class="anchor"></a><code><span class="keyword">val </span>http : <a href="index.html#type-http">http</a> <a href="index.html#type-typ">typ</a></code></dt><dt class="spec value" id="val-http_server"><a href="#val-http_server" class="anchor"></a><code><span class="keyword">val </span>http_server : <a href="index.html#type-conduit">conduit</a> <a href="index.html#type-impl">impl</a> <span>&#45;&gt;</span> <a href="index.html#type-http">http</a> <a href="index.html#type-impl">impl</a></code></dt><dt class="spec value" id="val-cohttp_server"><a href="#val-cohttp_server" class="anchor"></a><code><span class="keyword">val </span>cohttp_server : <a href="index.html#type-conduit">conduit</a> <a href="index.html#type-impl">impl</a> <span>&#45;&gt;</span> <a href="index.html#type-http">http</a> <a href="index.html#type-impl">impl</a></code></dt><dd><p><code>cohttp_server</code> starts a Cohttp server.</p></dd></dl><dl><dt class="spec value" id="val-httpaf_server"><a href="#val-httpaf_server" class="anchor"></a><code><span class="keyword">val </span>httpaf_server : <a href="index.html#type-conduit">conduit</a> <a href="index.html#type-impl">impl</a> <span>&#45;&gt;</span> <a href="index.html#type-http">http</a> <a href="index.html#type-impl">impl</a></code></dt><dd><p><code>httpaf_server</code> starts a http/af server.</p></dd></dl></section><section><header><h2 id="argv-configuration"><a href="#argv-configuration" class="anchor"></a>Argv configuration</h2></header><dl><dt class="spec value" id="val-default_argv"><a href="#val-default_argv" class="anchor"></a><code><span class="keyword">val </span>default_argv : Functoria_app.argv <a href="index.html#type-impl">impl</a></code></dt><dd><p><code>default_argv</code> is a dynamic argv implementation * which attempts to do something reasonable based on the target.</p></dd></dl><dl><dt class="spec value" id="val-no_argv"><a href="#val-no_argv" class="anchor"></a><code><span class="keyword">val </span>no_argv : Functoria_app.argv <a href="index.html#type-impl">impl</a></code></dt><dd><p><code>no_argv</code> Disable command line parsing and set argv to <code>|&quot;&quot;|</code>.</p></dd></dl></section><section><header><h2 id="other-devices"><a href="#other-devices" class="anchor"></a>Other devices</h2></header><dl><dt class="spec value" id="val-noop"><a href="#val-noop" class="anchor"></a><code><span class="keyword">val </span>noop : <a href="index.html#type-job">job</a> <a href="index.html#type-impl">impl</a></code></dt><dd><p><code>noop</code> is a job that does nothing, has no dependency and returns <code>()</code></p></dd></dl><dl><dt class="spec type" id="type-info"><a href="#type-info" class="anchor"></a><code><span class="keyword">type </span>info</code></dt><dd><p><code>info</code> is the type for module implementing <span class="xref-unresolved" title="unresolved reference to &quot;Mirage_runtime.Info&quot;"><a href="../../mirage-runtime/Mirage_runtime/index.html"><code>Mirage_runtime</code></a>.Info</span>.</p></dd></dl><dl><dt class="spec value" id="val-info"><a href="#val-info" class="anchor"></a><code><span class="keyword">val </span>info : <a href="index.html#type-info">info</a> <a href="index.html#type-typ">typ</a></code></dt><dd><p><code>info</code> is the combinator to generate <a href="index.html#type-info"><code>info</code></a> values to use at runtime.</p></dd></dl><dl><dt class="spec value" id="val-app_info"><a href="#val-app_info" class="anchor"></a><code><span class="keyword">val </span>app_info : <a href="index.html#type-info">info</a> <a href="index.html#type-impl">impl</a></code></dt><dd><p><code>app_info</code> exports all the information available at configure time into a runtime <span class="xref-unresolved" title="unresolved reference to &quot;Mirage.Info.t&quot;"><span class="xref-unresolved" title="unresolved reference to &quot;Mirage.Info&quot;"><a href="index.html"><code>Mirage</code></a>.Info</span>.t</span> value.</p></dd></dl></section><section><header><h2 id="application-registering"><a href="#application-registering" class="anchor"></a>Application registering</h2></header><dl><dt class="spec value" id="val-register"><a href="#val-register" class="anchor"></a><code><span class="keyword">val </span>register : ?&#8288;argv:Functoria_app.argv <a href="index.html#type-impl">impl</a> <span>&#45;&gt;</span> ?&#8288;tracing:<a href="index.html#type-tracing">tracing</a> <a href="index.html#type-impl">impl</a> <span>&#45;&gt;</span> ?&#8288;reporter:<a href="index.html#type-reporter">reporter</a> <a href="index.html#type-impl">impl</a> <span>&#45;&gt;</span> ?&#8288;keys:<a href="Key/index.html#type-t">Key.t</a> list <span>&#45;&gt;</span> ?&#8288;packages:Functoria.package list <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <a href="index.html#type-job">job</a> <a href="index.html#type-impl">impl</a> list <span>&#45;&gt;</span> unit</code></dt><dd><p><code>register name jobs</code> registers the application named by <code>name</code> which will executes the given <code>jobs</code>.</p><dl><dt>parameter packages</dt><dd><p>The opam packages needed by this module.</p></dd></dl><dl><dt>parameter keys</dt><dd><p>The keys related to this module.</p></dd></dl><dl><dt>parameter tracing</dt><dd><p>Enable tracing.</p></dd></dl><dl><dt>parameter reporter</dt><dd><p>Configure logging. The default log reporter is <a href="index.html#val-default_reporter"><code>default_reporter</code></a>. To disable logging, use <a href="index.html#val-no_reporter"><code>no_reporter</code></a>.</p></dd></dl><dl><dt>parameter argv</dt><dd><p>Configure command-line argument parsing. The default parser is <a href="index.html#val-default_argv"><code>default_argv</code></a>. To disable command-line parsing, use <a href="index.html#val-no_argv"><code>no_argv</code></a>.</p></dd></dl></dd></dl></section></div></body></html>