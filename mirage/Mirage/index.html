<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Mirage (mirage.Mirage)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.0.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../index.html">mirage</a> &#x00BB; Mirage</nav><header class="odoc-preamble"><h1>Module <code><span>Mirage</span></code></h1><p>Mirage combinators.</p><p><code>Mirage</code> devices a set of devices and combinator to to define portable applications across all platforms that MirageOS supports.</p><p><em>Release v3.10.6</em></p></header><nav class="odoc-toc"><ul><li><a href="#general-mirage-devices">General mirage devices</a></li><li><a href="#time">Time</a></li><li><a href="#clocks">Clocks</a></li><li><a href="#log-reporters">Log reporters</a></li><li><a href="#random">Random</a></li><li><a href="#consoles">Consoles</a></li><li><a href="#block-devices">Block devices</a></li><li><a href="#static-key/value-stores">Static key/value stores</a></li><li><a href="#filesystem">Filesystem</a></li><li><a href="#network-interfaces">Network interfaces</a></li><li><a href="#ethernet-configuration">Ethernet configuration</a></li><li><a href="#arp-configuration">ARP configuration</a></li><li><a href="#ip-configuration">IP configuration</a></li><li><a href="#udp-configuration">UDP configuration</a></li><li><a href="#tcp-configuration">TCP configuration</a></li><li><a href="#network-stack-configuration">Network stack configuration</a><ul><li><a href="#ipv6">IPv6</a></li><li><a href="#dual-ipv4-and-ipv6">Dual IPv4 and IPv6</a></li></ul></li><li><a href="#resolver-configuration">Resolver configuration</a></li><li><a href="#syslog-configuration">Syslog configuration</a></li><li><a href="#entropy">Entropy</a></li><li><a href="#conduit-configuration">Conduit configuration</a></li><li><a href="#http-configuration">HTTP configuration</a></li><li><a href="#argv-configuration">Argv configuration</a></li><li><a href="#other-devices">Other devices</a></li><li><a href="#application-registering">Application registering</a></li></ul></nav><div class="odoc-content"><div class="odoc-spec"><div class="spec module" id="module-Key" class="anchored"><a href="#module-Key" class="anchor"></a><code><span><span class="keyword">module</span> </span><span><a href="Key/index.html">Key</a></span><span> : <span class="keyword">module</span> <span class="keyword">type</span> <span class="keyword">of</span> <span class="keyword">struct</span> <span class="keyword">include</span> <a href="../Mirage_key/index.html">Mirage_key</a> <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Configuration keys.</p></div></div><div class="odoc-include"><details open="open"><summary class="spec include"><code><span><span class="keyword">include</span> <span class="xref-unresolved">Functoria_app</span>.DSL</span></code></summary><div class="odoc-spec"><div class="spec type" id="type-typ" class="anchored"><a href="#type-typ" class="anchor"></a><code><span><span class="keyword">type</span> <span>!'d typ</span></span><span> = <span><span class="type-var">'d</span> <span class="xref-unresolved">Functoria</span>.typ</span></span><span> = </span></code><table><tr id="type-typ.Type" class="anchored"><td class="def variant constructor"><a href="#type-typ.Type" class="anchor"></a><code><span>| </span><span><span class="constructor">Type</span> : <span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="#type-typ">typ</a></span></span></code></td></tr><tr id="type-typ.Function" class="anchored"><td class="def variant constructor"><a href="#type-typ.Function" class="anchor"></a><code><span>| </span><span><span class="constructor">Function</span> : <span><span class="type-var">'b</span> <a href="#type-typ">typ</a></span> * <span><span class="type-var">'c</span> <a href="#type-typ">typ</a></span> <span class="arrow">&#45;&gt;</span> <span><span>(<span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'c</span>)</span> <a href="#type-typ">typ</a></span></span></code></td></tr></table></div></div><div class="odoc-spec"><div class="spec value" id="val-typ" class="anchored"><a href="#val-typ" class="anchor"></a><code><span><span class="keyword">val</span> typ : <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-typ">typ</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-(@-&gt;)" class="anchored"><a href="#val-(@-&gt;)" class="anchor"></a><code><span><span class="keyword">val</span> (@-&gt;) : <span><span><span class="type-var">'a</span> <a href="#type-typ">typ</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'b</span> <a href="#type-typ">typ</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span>)</span> <a href="#type-typ">typ</a></span></span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-job" class="anchored"><a href="#type-job" class="anchor"></a><code><span><span class="keyword">type</span> job</span><span> = <span class="xref-unresolved">Functoria</span>.job</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-job" class="anchored"><a href="#val-job" class="anchor"></a><code><span><span class="keyword">val</span> job : <span><a href="#type-job">job</a> <a href="#type-typ">typ</a></span></span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-impl" class="anchored"><a href="#type-impl" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a impl</span></span><span> = <span><span class="type-var">'a</span> <span class="xref-unresolved">Functoria</span>.impl</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-($)" class="anchored"><a href="#val-($)" class="anchor"></a><code><span><span class="keyword">val</span> ($) : <span><span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span>)</span> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <a href="#type-impl">impl</a></span></span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-abstract_impl" class="anchored"><a href="#type-abstract_impl" class="anchor"></a><code><span><span class="keyword">type</span> abstract_impl</span><span> = <span class="xref-unresolved">Functoria</span>.abstract_impl</span><span> = </span></code><table><tr id="type-abstract_impl.Abstract" class="anchored"><td class="def variant constructor"><a href="#type-abstract_impl.Abstract" class="anchor"></a><code><span>| </span><span><span class="constructor">Abstract</span> : <span><span class="type-var">'a</span> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span> <a href="#type-abstract_impl">abstract_impl</a></span></code></td></tr></table></div></div><div class="odoc-spec"><div class="spec value" id="val-abstract" class="anchored"><a href="#val-abstract" class="anchor"></a><code><span><span class="keyword">val</span> abstract : <span><span><span class="type-var">'a</span> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-abstract_impl">abstract_impl</a></span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-key" class="anchored"><a href="#type-key" class="anchor"></a><code><span><span class="keyword">type</span> key</span><span> = <span class="xref-unresolved">Functoria_key</span>.t</span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-context" class="anchored"><a href="#type-context" class="anchor"></a><code><span><span class="keyword">type</span> context</span><span> = <span class="xref-unresolved">Functoria_key</span>.context</span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-value" class="anchored"><a href="#type-value" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a value</span></span><span> = <span><span class="type-var">'a</span> <span class="xref-unresolved">Functoria_key</span>.value</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-if_impl" class="anchored"><a href="#val-if_impl" class="anchor"></a><code><span><span class="keyword">val</span> if_impl : <span><span>bool <a href="#type-value">value</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-impl">impl</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-match_impl" class="anchored"><a href="#val-match_impl" class="anchor"></a><code><span><span class="keyword">val</span> match_impl : <span><span><span class="type-var">'b</span> <a href="#type-value">value</a></span> <span class="arrow">&#45;&gt;</span></span> <span>default:<span><span class="type-var">'a</span> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span>(<span class="type-var">'b</span> * <span><span class="type-var">'a</span> <a href="#type-impl">impl</a></span>)</span> list</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-impl">impl</a></span></span></code></div></div><div class="odoc-spec"><div class="spec module-type" id="module-type-KEY" class="anchored"><a href="#module-type-KEY" class="anchor"></a><code><span><span class="keyword">module</span> <span class="keyword">type</span> </span><span><a href="module-type-KEY/index.html">KEY</a></span><span> = <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-package" class="anchored"><a href="#type-package" class="anchor"></a><code><span><span class="keyword">type</span> package</span><span> = <span class="keyword">private</span> <span class="xref-unresolved">Functoria</span>.package</span><span> = </span><span>{</span></code><table><tr id="type-package.opam" class="anchored"><td class="def record field"><a href="#type-package.opam" class="anchor"></a><code><span>opam : string;</span></code></td></tr><tr id="type-package.pin" class="anchored"><td class="def record field"><a href="#type-package.pin" class="anchor"></a><code><span>pin : <span>string option</span>;</span></code></td></tr><tr id="type-package.build" class="anchored"><td class="def record field"><a href="#type-package.build" class="anchor"></a><code><span>build : bool;</span></code></td></tr><tr id="type-package.ocamlfind" class="anchored"><td class="def record field"><a href="#type-package.ocamlfind" class="anchor"></a><code><span>ocamlfind : <span class="xref-unresolved">Astring</span>.String.Set.t;</span></code></td></tr><tr id="type-package.min" class="anchored"><td class="def record field"><a href="#type-package.min" class="anchor"></a><code><span>min : <span class="xref-unresolved">Astring</span>.String.Set.t;</span></code></td></tr><tr id="type-package.max" class="anchored"><td class="def record field"><a href="#type-package.max" class="anchor"></a><code><span>max : <span class="xref-unresolved">Astring</span>.String.Set.t;</span></code></td></tr></table><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-package" class="anchored"><a href="#val-package" class="anchor"></a><code><span><span class="keyword">val</span> package : <span>?build:bool <span class="arrow">&#45;&gt;</span></span> <span>?sublibs:<span>string list</span> <span class="arrow">&#45;&gt;</span></span> <span>?ocamlfind:<span>string list</span> <span class="arrow">&#45;&gt;</span></span>
<span>?min:string <span class="arrow">&#45;&gt;</span></span> <span>?max:string <span class="arrow">&#45;&gt;</span></span> <span>?pin:string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <a href="#type-package">package</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-foreign" class="anchored"><a href="#val-foreign" class="anchor"></a><code><span><span class="keyword">val</span> foreign : <span>?packages:<span><a href="#type-package">package</a> list</span> <span class="arrow">&#45;&gt;</span></span> <span>?keys:<span><a href="#type-key">key</a> list</span> <span class="arrow">&#45;&gt;</span></span> <span>?deps:<span><a href="#type-abstract_impl">abstract_impl</a> list</span> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-typ">typ</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-impl">impl</a></span></span></code></div></div><div class="odoc-spec"><div class="spec module" id="module-Info" class="anchored"><a href="#module-Info" class="anchor"></a><code><span><span class="keyword">module</span> </span><span>Info</span><span> = <span class="xref-unresolved">Functoria</span>.Info</span></code></div></div><div class="odoc-spec"><div class="spec class-type" id="class-type-configurable" class="anchored"><a href="#class-type-configurable" class="anchor"></a><code><span><span class="keyword">class</span> <span class="keyword">type</span> !'ty </span><span>configurable</span><span> = <span class="keyword">object</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-impl" class="anchored"><a href="#val-impl" class="anchor"></a><code><span><span class="keyword">val</span> impl : <span><span><span class="type-var">'a</span> <a href="class-type-configurable/index.html">configurable</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-impl">impl</a></span></span></code></div></div><div class="odoc-spec"><div class="spec class" id="class-base_configurable" class="anchored"><a href="#class-base_configurable" class="anchor"></a><code><span><span class="keyword">class</span>  </span><span>base_configurable</span><span> : <span class="keyword">object</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec class" id="class-foreign" class="anchored"><a href="#class-foreign" class="anchor"></a><code><span><span class="keyword">class</span> !'a </span><span>foreign</span><span> : <span>?packages:<span><a href="#type-package">package</a> list</span> <span class="arrow">&#45;&gt;</span></span> <span>?keys:<span><a href="#type-key">key</a> list</span> <span class="arrow">&#45;&gt;</span></span> <span>?deps:<span><a href="#type-abstract_impl">abstract_impl</a> list</span> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-typ">typ</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="xref-unresolved">configurable</span></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-hash" class="anchored"><a href="#val-hash" class="anchor"></a><code><span><span class="keyword">val</span> hash : <span><span><span class="type-var">'a</span> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> int</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-equal" class="anchored"><a href="#val-equal" class="anchor"></a><code><span><span class="keyword">val</span> equal : <span><span><span class="type-var">'a</span> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div></div><div class="odoc-spec"><div class="spec module" id="module-ImplTbl" class="anchored"><a href="#module-ImplTbl" class="anchor"></a><code><span><span class="keyword">module</span> </span><span>ImplTbl</span><span> = <span class="xref-unresolved">Functoria</span>.ImplTbl</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-explode" class="anchored"><a href="#val-explode" class="anchor"></a><code><span><span class="keyword">val</span> explode : <span><span><span class="type-var">'a</span> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span>[ <span>`App of <a href="#type-abstract_impl">abstract_impl</a> * <a href="#type-abstract_impl">abstract_impl</a></span> <span><span>| `If</span> of <span>bool <a href="#type-value">value</a></span> * <span><span class="type-var">'a</span> <a href="#type-impl">impl</a></span> * <span><span class="type-var">'a</span> <a href="#type-impl">impl</a></span></span> <span><span>| `Impl</span> of <span><span class="type-var">'a</span> <a href="class-type-configurable/index.html">configurable</a></span></span> ]</span></span></code></div></div></details></div><h3 id="general-mirage-devices"><a href="#general-mirage-devices" class="anchor"></a>General mirage devices</h3><div class="odoc-spec"><div class="spec type" id="type-tracing" class="anchored"><a href="#type-tracing" class="anchor"></a><code><span><span class="keyword">type</span> tracing</span></code></div><div class="spec-doc"><p>The type for tracing.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-tracing" class="anchored"><a href="#val-tracing" class="anchor"></a><code><span><span class="keyword">val</span> tracing : <span><a href="#type-tracing">tracing</a> <a href="#type-typ">typ</a></span></span></code></div><div class="spec-doc"><p>Implementation of the <a href="#val-tracing"><code>tracing</code></a> type.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-mprof_trace" class="anchored"><a href="#val-mprof_trace" class="anchor"></a><code><span><span class="keyword">val</span> mprof_trace : <span>size:int <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-tracing">tracing</a> <a href="#type-impl">impl</a></span></span></code></div><div class="spec-doc"><p>Use mirage-profile to trace the unikernel. On Unix, this creates and mmaps a file called &quot;trace.ctf&quot;. On Xen, it shares the trace buffer with dom0.</p><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">size:</span> <p>size of the ring buffer to use.</p></li></ul></div></div><div class="odoc-spec"><div class="spec type" id="type-qubesdb" class="anchored"><a href="#type-qubesdb" class="anchor"></a><code><span><span class="keyword">type</span> qubesdb</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-qubesdb" class="anchored"><a href="#val-qubesdb" class="anchor"></a><code><span><span class="keyword">val</span> qubesdb : <span><a href="#type-qubesdb">qubesdb</a> <a href="#type-typ">typ</a></span></span></code></div><div class="spec-doc"><p>For the Qubes target, the Qubes database from which to look up * dynamic runtime configuration information.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-default_qubesdb" class="anchored"><a href="#val-default_qubesdb" class="anchor"></a><code><span><span class="keyword">val</span> default_qubesdb : <span><a href="#type-qubesdb">qubesdb</a> <a href="#type-impl">impl</a></span></span></code></div><div class="spec-doc"><p>A default qubes database, guessed from the usual valid configurations.</p></div></div><h3 id="time"><a href="#time" class="anchor"></a>Time</h3><div class="odoc-spec"><div class="spec type" id="type-time" class="anchored"><a href="#type-time" class="anchor"></a><code><span><span class="keyword">type</span> time</span></code></div><div class="spec-doc"><p>Abstract type for timers.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-time" class="anchored"><a href="#val-time" class="anchor"></a><code><span><span class="keyword">val</span> time : <span><a href="#type-time">time</a> <a href="#type-typ">typ</a></span></span></code></div><div class="spec-doc"><p>Implementations of the <code>Mirage_types.TIME</code> signature.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-default_time" class="anchored"><a href="#val-default_time" class="anchor"></a><code><span><span class="keyword">val</span> default_time : <span><a href="#type-time">time</a> <a href="#type-impl">impl</a></span></span></code></div><div class="spec-doc"><p>The default timer implementation.</p></div></div><h3 id="clocks"><a href="#clocks" class="anchor"></a>Clocks</h3><div class="odoc-spec"><div class="spec type" id="type-pclock" class="anchored"><a href="#type-pclock" class="anchor"></a><code><span><span class="keyword">type</span> pclock</span></code></div><div class="spec-doc"><p>Abstract type for POSIX clocks.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-pclock" class="anchored"><a href="#val-pclock" class="anchor"></a><code><span><span class="keyword">val</span> pclock : <span><a href="#type-pclock">pclock</a> <a href="#type-typ">typ</a></span></span></code></div><div class="spec-doc"><p>Implementations of the <code>Mirage_types</code>.PCLOCK signature.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-default_posix_clock" class="anchored"><a href="#val-default_posix_clock" class="anchor"></a><code><span><span class="keyword">val</span> default_posix_clock : <span><a href="#type-pclock">pclock</a> <a href="#type-impl">impl</a></span></span></code></div><div class="spec-doc"><p>The default mirage-clock PCLOCK implementation.</p></div></div><div class="odoc-spec"><div class="spec type" id="type-mclock" class="anchored"><a href="#type-mclock" class="anchor"></a><code><span><span class="keyword">type</span> mclock</span></code></div><div class="spec-doc"><p>Abstract type for monotonic clocks</p></div></div><div class="odoc-spec"><div class="spec value" id="val-mclock" class="anchored"><a href="#val-mclock" class="anchor"></a><code><span><span class="keyword">val</span> mclock : <span><a href="#type-mclock">mclock</a> <a href="#type-typ">typ</a></span></span></code></div><div class="spec-doc"><p>Implementations of the <code>Mirage_types</code>.MCLOCK signature.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-default_monotonic_clock" class="anchored"><a href="#val-default_monotonic_clock" class="anchor"></a><code><span><span class="keyword">val</span> default_monotonic_clock : <span><a href="#type-mclock">mclock</a> <a href="#type-impl">impl</a></span></span></code></div><div class="spec-doc"><p>The default mirage-clock MCLOCK implementation.</p></div></div><h3 id="log-reporters"><a href="#log-reporters" class="anchor"></a>Log reporters</h3><div class="odoc-spec"><div class="spec type" id="type-reporter" class="anchored"><a href="#type-reporter" class="anchor"></a><code><span><span class="keyword">type</span> reporter</span></code></div><div class="spec-doc"><p>The type for log reporters.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-reporter" class="anchored"><a href="#val-reporter" class="anchor"></a><code><span><span class="keyword">val</span> reporter : <span><a href="#type-reporter">reporter</a> <a href="#type-typ">typ</a></span></span></code></div><div class="spec-doc"><p>Implementation of the log <a href="#val-reporter"><code>reporter</code></a> type.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-default_reporter" class="anchored"><a href="#val-default_reporter" class="anchor"></a><code><span><span class="keyword">val</span> default_reporter : <span>?clock:<span><a href="#type-pclock">pclock</a> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span>?ring_size:int <span class="arrow">&#45;&gt;</span></span> <span>?level:<span class="xref-unresolved">Logs</span>.level <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-reporter">reporter</a> <a href="#type-impl">impl</a></span></span></code></div><div class="spec-doc"><p><code>default_reporter ?clock ?level ()</code> is the log reporter that prints log messages to the console, timestampted with <code>clock</code>. If not provided, the default clock is <a href="#val-default_posix_clock"><code>default_posix_clock</code></a>. <code>level</code> is the default log threshold. It is <code>Logs.Info</code> if not specified.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-no_reporter" class="anchored"><a href="#val-no_reporter" class="anchor"></a><code><span><span class="keyword">val</span> no_reporter : <span><a href="#type-reporter">reporter</a> <a href="#type-impl">impl</a></span></span></code></div><div class="spec-doc"><p><code>no_reporter</code> disable log reporting.</p></div></div><h3 id="random"><a href="#random" class="anchor"></a>Random</h3><div class="odoc-spec"><div class="spec type" id="type-random" class="anchored"><a href="#type-random" class="anchor"></a><code><span><span class="keyword">type</span> random</span></code></div><div class="spec-doc"><p>Abstract type for random sources.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-random" class="anchored"><a href="#val-random" class="anchor"></a><code><span><span class="keyword">val</span> random : <span><a href="#type-random">random</a> <a href="#type-typ">typ</a></span></span></code></div><div class="spec-doc"><p>Implementations of the <code>Mirage_types.RANDOM</code> signature.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-stdlib_random" class="anchored"><a href="#val-stdlib_random" class="anchor"></a><code><span><span class="keyword">val</span> stdlib_random : <span><a href="#type-random">random</a> <a href="#type-impl">impl</a></span></span></code></div><div class="spec-doc"><p>Passthrough to the OCaml Random generator.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-nocrypto_random" class="anchored"><a href="#val-nocrypto_random" class="anchor"></a><code><span><span class="keyword">val</span> nocrypto_random : <span><a href="#type-random">random</a> <a href="#type-impl">impl</a></span></span></code></div><div class="spec-doc"><p>Passthrough to the Fortuna PRNG implemented in nocrypto.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-default_random" class="anchored"><a href="#val-default_random" class="anchor"></a><code><span><span class="keyword">val</span> default_random : <span><a href="#type-random">random</a> <a href="#type-impl">impl</a></span></span></code></div><div class="spec-doc"><p>Default PRNG device to be used in unikernels. It uses getrandom/getentropy on Unix, and a Fortuna PRNG on other targets.</p></div></div><h3 id="consoles"><a href="#consoles" class="anchor"></a>Consoles</h3><div class="odoc-spec"><div class="spec type" id="type-console" class="anchored"><a href="#type-console" class="anchor"></a><code><span><span class="keyword">type</span> console</span></code></div><div class="spec-doc"><p>Abstract type for consoles.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-console" class="anchored"><a href="#val-console" class="anchor"></a><code><span><span class="keyword">val</span> console : <span><a href="#type-console">console</a> <a href="#type-typ">typ</a></span></span></code></div><div class="spec-doc"><p>Implementations of the <code>Mirage_types.CONSOLE</code> signature.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-default_console" class="anchored"><a href="#val-default_console" class="anchor"></a><code><span><span class="keyword">val</span> default_console : <span><a href="#type-console">console</a> <a href="#type-impl">impl</a></span></span></code></div><div class="spec-doc"><p>Default console implementation.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-custom_console" class="anchored"><a href="#val-custom_console" class="anchor"></a><code><span><span class="keyword">val</span> custom_console : <span>string <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-console">console</a> <a href="#type-impl">impl</a></span></span></code></div><div class="spec-doc"><p>Custom console implementation.</p></div></div><h3 id="block-devices"><a href="#block-devices" class="anchor"></a>Block devices</h3><div class="odoc-spec"><div class="spec type" id="type-block" class="anchored"><a href="#type-block" class="anchor"></a><code><span><span class="keyword">type</span> block</span></code></div><div class="spec-doc"><p>Abstract type for raw block device configurations.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-block" class="anchored"><a href="#val-block" class="anchor"></a><code><span><span class="keyword">val</span> block : <span><a href="#type-block">block</a> <a href="#type-typ">typ</a></span></span></code></div><div class="spec-doc"><p>Implementations of the <code>Mirage_types.BLOCK</code> signature.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-block_of_file" class="anchored"><a href="#val-block_of_file" class="anchor"></a><code><span><span class="keyword">val</span> block_of_file : <span>string <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-block">block</a> <a href="#type-impl">impl</a></span></span></code></div><div class="spec-doc"><p>Use the given file as a raw block device.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-block_of_xenstore_id" class="anchored"><a href="#val-block_of_xenstore_id" class="anchor"></a><code><span><span class="keyword">val</span> block_of_xenstore_id : <span>string <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-block">block</a> <a href="#type-impl">impl</a></span></span></code></div><div class="spec-doc"><p>Use the given XenStore ID (ex: <code>/dev/xvdi1</code> or <code>51760</code>) as a raw block device.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-ramdisk" class="anchored"><a href="#val-ramdisk" class="anchor"></a><code><span><span class="keyword">val</span> ramdisk : <span>string <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-block">block</a> <a href="#type-impl">impl</a></span></span></code></div><div class="spec-doc"><p>Use a ramdisk with the given name.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-generic_block" class="anchored"><a href="#val-generic_block" class="anchor"></a><code><span><span class="keyword">val</span> generic_block : <span>?group:string <span class="arrow">&#45;&gt;</span></span>
<span>?key:<span><span>[ `XenstoreId <span>| `BlockFile</span> <span>| `Ramdisk</span> ]</span> <a href="#type-value">value</a></span> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-block">block</a> <a href="#type-impl">impl</a></span></span></code></div></div><h3 id="static-key/value-stores"><a href="#static-key/value-stores" class="anchor"></a>Static key/value stores</h3><div class="odoc-spec"><div class="spec type" id="type-kv_ro" class="anchored"><a href="#type-kv_ro" class="anchor"></a><code><span><span class="keyword">type</span> kv_ro</span></code></div><div class="spec-doc"><p>Abstract type for read-only key/value store.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-kv_ro" class="anchored"><a href="#val-kv_ro" class="anchor"></a><code><span><span class="keyword">val</span> kv_ro : <span><a href="#type-kv_ro">kv_ro</a> <a href="#type-typ">typ</a></span></span></code></div><div class="spec-doc"><p>Implementations of the <code>Mirage_types.KV_RO</code> signature.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-crunch" class="anchored"><a href="#val-crunch" class="anchor"></a><code><span><span class="keyword">val</span> crunch : <span>string <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-kv_ro">kv_ro</a> <a href="#type-impl">impl</a></span></span></code></div><div class="spec-doc"><p>Crunch a directory.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-archive" class="anchored"><a href="#val-archive" class="anchor"></a><code><span><span class="keyword">val</span> archive : <span><span><a href="#type-block">block</a> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-kv_ro">kv_ro</a> <a href="#type-impl">impl</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-archive_of_files" class="anchored"><a href="#val-archive_of_files" class="anchor"></a><code><span><span class="keyword">val</span> archive_of_files : <span>?dir:string <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-kv_ro">kv_ro</a> <a href="#type-impl">impl</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-direct_kv_ro" class="anchored"><a href="#val-direct_kv_ro" class="anchor"></a><code><span><span class="keyword">val</span> direct_kv_ro : <span>string <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-kv_ro">kv_ro</a> <a href="#type-impl">impl</a></span></span></code></div><div class="spec-doc"><p>Direct access to the underlying filesystem as a key/value store. For Xen backends, this is equivalent to <code>crunch</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-generic_kv_ro" class="anchored"><a href="#val-generic_kv_ro" class="anchor"></a><code><span><span class="keyword">val</span> generic_kv_ro : <span>?group:string <span class="arrow">&#45;&gt;</span></span>
<span>?key:<span><span>[ `Archive <span>| `Crunch</span> <span>| `Direct</span> <span>| `Fat</span> ]</span> <a href="#type-value">value</a></span> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-kv_ro">kv_ro</a> <a href="#type-impl">impl</a></span></span></code></div><div class="spec-doc"><p>Generic key/value that will choose dynamically between <a href="#val-fat"><code>fat</code></a>, <a href="#val-archive"><code>archive</code></a> and <a href="#val-crunch"><code>crunch</code></a>. To use a filesystem implementation, try <a href="#val-kv_ro_of_fs"><code>kv_ro_of_fs</code></a>.</p><p>If no key is provided, it uses <a href="Key/index.html#val-kv_ro"><code>Key.kv_ro</code></a> to create a new one.</p></div></div><div class="odoc-spec"><div class="spec type" id="type-kv_rw" class="anchored"><a href="#type-kv_rw" class="anchor"></a><code><span><span class="keyword">type</span> kv_rw</span></code></div><div class="spec-doc"><p>Abstract type for read-write key/value store.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-kv_rw" class="anchored"><a href="#val-kv_rw" class="anchor"></a><code><span><span class="keyword">val</span> kv_rw : <span><a href="#type-kv_rw">kv_rw</a> <a href="#type-typ">typ</a></span></span></code></div><div class="spec-doc"><p>Implementations of the <code>Mirage_types.KV_RW</code> signature.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-direct_kv_rw" class="anchored"><a href="#val-direct_kv_rw" class="anchor"></a><code><span><span class="keyword">val</span> direct_kv_rw : <span>string <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-kv_rw">kv_rw</a> <a href="#type-impl">impl</a></span></span></code></div><div class="spec-doc"><p>Direct access to the underlying filesystem as a key/value store. Only available on Unix backends.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-kv_rw_mem" class="anchored"><a href="#val-kv_rw_mem" class="anchor"></a><code><span><span class="keyword">val</span> kv_rw_mem : <span>?clock:<span><a href="#type-pclock">pclock</a> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-kv_rw">kv_rw</a> <a href="#type-impl">impl</a></span></span></code></div><div class="spec-doc"><p>An in-memory key-value store using <code>mirage-kv-mem</code>.</p></div></div><h3 id="filesystem"><a href="#filesystem" class="anchor"></a>Filesystem</h3><div class="odoc-spec"><div class="spec type" id="type-fs" class="anchored"><a href="#type-fs" class="anchor"></a><code><span><span class="keyword">type</span> fs</span></code></div><div class="spec-doc"><p>Abstract type for filesystems.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-fs" class="anchored"><a href="#val-fs" class="anchor"></a><code><span><span class="keyword">val</span> fs : <span><a href="#type-fs">fs</a> <a href="#type-typ">typ</a></span></span></code></div><div class="spec-doc"><p>Implementations of the <code>Mirage_types.FS</code> signature.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-fat" class="anchored"><a href="#val-fat" class="anchor"></a><code><span><span class="keyword">val</span> fat : <span><span><a href="#type-block">block</a> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-fs">fs</a> <a href="#type-impl">impl</a></span></span></code></div><div class="spec-doc"><p>Consider a raw block device as a FAT filesystem.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-fat_of_files" class="anchored"><a href="#val-fat_of_files" class="anchor"></a><code><span><span class="keyword">val</span> fat_of_files : <span>?dir:string <span class="arrow">&#45;&gt;</span></span> <span>?regexp:string <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-fs">fs</a> <a href="#type-impl">impl</a></span></span></code></div><div class="spec-doc"><p><code>fat_files dir ?dir ?regexp ()</code> collects all the files matching the shell pattern <code>regexp</code> in the directory <code>dir</code> into a FAT image. By default, <code>dir</code> is the current working directory and <code>regexp</code> is <i>*</i></p></div></div><div class="odoc-spec"><div class="spec value" id="val-kv_ro_of_fs" class="anchored"><a href="#val-kv_ro_of_fs" class="anchor"></a><code><span><span class="keyword">val</span> kv_ro_of_fs : <span><span><a href="#type-fs">fs</a> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-kv_ro">kv_ro</a> <a href="#type-impl">impl</a></span></span></code></div><div class="spec-doc"><p>Consider a filesystem implementation as a read-only key/value store.</p></div></div><h3 id="network-interfaces"><a href="#network-interfaces" class="anchor"></a>Network interfaces</h3><div class="odoc-spec"><div class="spec type" id="type-network" class="anchored"><a href="#type-network" class="anchor"></a><code><span><span class="keyword">type</span> network</span></code></div><div class="spec-doc"><p>Abstract type for network configurations.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-network" class="anchored"><a href="#val-network" class="anchor"></a><code><span><span class="keyword">val</span> network : <span><a href="#type-network">network</a> <a href="#type-typ">typ</a></span></span></code></div><div class="spec-doc"><p>Implementations of the <code>Mirage_types.NETWORK</code> signature.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-default_network" class="anchored"><a href="#val-default_network" class="anchor"></a><code><span><span class="keyword">val</span> default_network : <span><a href="#type-network">network</a> <a href="#type-impl">impl</a></span></span></code></div><div class="spec-doc"><p><code>default_network</code> is a dynamic network implementation * which attempts to do something reasonable based on the target.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-netif" class="anchored"><a href="#val-netif" class="anchor"></a><code><span><span class="keyword">val</span> netif : <span>?group:string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-network">network</a> <a href="#type-impl">impl</a></span></span></code></div><div class="spec-doc"><p>A custom network interface. Exposes a <a href="Key/index.html#val-interface"><code>Key.interface</code></a> key.</p></div></div><h3 id="ethernet-configuration"><a href="#ethernet-configuration" class="anchor"></a>Ethernet configuration</h3><div class="odoc-spec"><div class="spec type" id="type-ethernet" class="anchored"><a href="#type-ethernet" class="anchor"></a><code><span><span class="keyword">type</span> ethernet</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-ethernet" class="anchored"><a href="#val-ethernet" class="anchor"></a><code><span><span class="keyword">val</span> ethernet : <span><a href="#type-ethernet">ethernet</a> <a href="#type-typ">typ</a></span></span></code></div><div class="spec-doc"><p>Implementations of the <code>Mirage_types.ETHERNET</code> signature.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-etif" class="anchored"><a href="#val-etif" class="anchor"></a><code><span><span class="keyword">val</span> etif : <span><span><a href="#type-network">network</a> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-ethernet">ethernet</a> <a href="#type-impl">impl</a></span></span></code></div></div><h3 id="arp-configuration"><a href="#arp-configuration" class="anchor"></a>ARP configuration</h3><div class="odoc-spec"><div class="spec type" id="type-arpv4" class="anchored"><a href="#type-arpv4" class="anchor"></a><code><span><span class="keyword">type</span> arpv4</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-arpv4" class="anchored"><a href="#val-arpv4" class="anchor"></a><code><span><span class="keyword">val</span> arpv4 : <span><a href="#type-arpv4">arpv4</a> <a href="#type-typ">typ</a></span></span></code></div><div class="spec-doc"><p>Implementation of the <code>Mirage_types.ARPV4</code> signature.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-arp" class="anchored"><a href="#val-arp" class="anchor"></a><code><span><span class="keyword">val</span> arp : <span>?time:<span><a href="#type-time">time</a> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><a href="#type-ethernet">ethernet</a> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-arpv4">arpv4</a> <a href="#type-impl">impl</a></span></span></code></div><div class="spec-doc"><p>ARP implementation provided by the arp library</p></div></div><h3 id="ip-configuration"><a href="#ip-configuration" class="anchor"></a>IP configuration</h3><p>Implementations of the <code>Mirage_types.IP</code> signature.</p><div class="odoc-spec"><div class="spec type" id="type-v4" class="anchored"><a href="#type-v4" class="anchor"></a><code><span><span class="keyword">type</span> v4</span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-v6" class="anchored"><a href="#type-v6" class="anchor"></a><code><span><span class="keyword">type</span> v6</span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-v4v6" class="anchored"><a href="#type-v4v6" class="anchor"></a><code><span><span class="keyword">type</span> v4v6</span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-ip" class="anchored"><a href="#type-ip" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a ip</span></span></code></div><div class="spec-doc"><p>Abstract type for IP configurations.</p></div></div><div class="odoc-spec"><div class="spec type" id="type-ipv4" class="anchored"><a href="#type-ipv4" class="anchor"></a><code><span><span class="keyword">type</span> ipv4</span><span> = <span><a href="#type-v4">v4</a> <a href="#type-ip">ip</a></span></span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-ipv6" class="anchored"><a href="#type-ipv6" class="anchor"></a><code><span><span class="keyword">type</span> ipv6</span><span> = <span><a href="#type-v6">v6</a> <a href="#type-ip">ip</a></span></span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-ipv4v6" class="anchored"><a href="#type-ipv4v6" class="anchor"></a><code><span><span class="keyword">type</span> ipv4v6</span><span> = <span><a href="#type-v4v6">v4v6</a> <a href="#type-ip">ip</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-ipv4" class="anchored"><a href="#val-ipv4" class="anchor"></a><code><span><span class="keyword">val</span> ipv4 : <span><a href="#type-ipv4">ipv4</a> <a href="#type-typ">typ</a></span></span></code></div><div class="spec-doc"><p>The <code>Mirage_types.IPV4</code> module signature.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-ipv6" class="anchored"><a href="#val-ipv6" class="anchor"></a><code><span><span class="keyword">val</span> ipv6 : <span><a href="#type-ipv6">ipv6</a> <a href="#type-typ">typ</a></span></span></code></div><div class="spec-doc"><p>The <code>Mirage_types.IPV6</code> module signature.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-ipv4v6" class="anchored"><a href="#val-ipv4v6" class="anchor"></a><code><span><span class="keyword">val</span> ipv4v6 : <span><a href="#type-ipv4v6">ipv4v6</a> <a href="#type-typ">typ</a></span></span></code></div><div class="spec-doc"><p>The <code>Mirage_types.IP</code> module signature with ipaddr = Ipaddr.t.</p></div></div><div class="odoc-spec"><div class="spec type" id="type-ipv4_config" class="anchored"><a href="#type-ipv4_config" class="anchor"></a><code><span><span class="keyword">type</span> ipv4_config</span><span> = </span><span>{</span></code><table><tr id="type-ipv4_config.network" class="anchored"><td class="def record field"><a href="#type-ipv4_config.network" class="anchor"></a><code><span>network : <span class="xref-unresolved">Ipaddr</span>.V4.Prefix.t;</span></code></td></tr><tr id="type-ipv4_config.gateway" class="anchored"><td class="def record field"><a href="#type-ipv4_config.gateway" class="anchor"></a><code><span>gateway : <span><span class="xref-unresolved">Ipaddr</span>.V4.t option</span>;</span></code></td></tr></table><code><span>}</span></code></div><div class="spec-doc"><p>Type for manual IPv4 configuration.</p></div></div><div class="odoc-spec"><div class="spec type" id="type-ipv6_config" class="anchored"><a href="#type-ipv6_config" class="anchor"></a><code><span><span class="keyword">type</span> ipv6_config</span><span> = </span><span>{</span></code><table><tr id="type-ipv6_config.network" class="anchored"><td class="def record field"><a href="#type-ipv6_config.network" class="anchor"></a><code><span>network : <span class="xref-unresolved">Ipaddr</span>.V6.Prefix.t;</span></code></td></tr><tr id="type-ipv6_config.gateway" class="anchored"><td class="def record field"><a href="#type-ipv6_config.gateway" class="anchor"></a><code><span>gateway : <span><span class="xref-unresolved">Ipaddr</span>.V6.t option</span>;</span></code></td></tr></table><code><span>}</span></code></div><div class="spec-doc"><p>Type for manual IPv6 configuration.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-create_ipv4" class="anchored"><a href="#val-create_ipv4" class="anchor"></a><code><span><span class="keyword">val</span> create_ipv4 : <span>?group:string <span class="arrow">&#45;&gt;</span></span> <span>?config:<a href="#type-ipv4_config">ipv4_config</a> <span class="arrow">&#45;&gt;</span></span> <span>?no_init:<span>bool <a href="Key/index.html#type-key">Key.key</a></span> <span class="arrow">&#45;&gt;</span></span> <span>?random:<span><a href="#type-random">random</a> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span>
<span>?clock:<span><a href="#type-mclock">mclock</a> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><a href="#type-ethernet">ethernet</a> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><a href="#type-arpv4">arpv4</a> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-ipv4">ipv4</a> <a href="#type-impl">impl</a></span></span></code></div><div class="spec-doc"><p>Use an IPv4 address Exposes the keys <a href="../Mirage_key/V4/index.html#val-network"><code>Key.V4.network</code></a> and <a href="../Mirage_key/V4/index.html#val-gateway"><code>Key.V4.gateway</code></a>. If provided, the values of these keys will override those supplied in the ipv4 configuration record, if that has been provided.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-ipv4_qubes" class="anchored"><a href="#val-ipv4_qubes" class="anchor"></a><code><span><span class="keyword">val</span> ipv4_qubes : <span>?random:<span><a href="#type-random">random</a> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span>?clock:<span><a href="#type-mclock">mclock</a> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><a href="#type-qubesdb">qubesdb</a> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><a href="#type-ethernet">ethernet</a> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><a href="#type-arpv4">arpv4</a> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-ipv4">ipv4</a> <a href="#type-impl">impl</a></span></span></code></div><div class="spec-doc"><p>Use a given initialized QubesDB to look up and configure the appropriate * IPv4 interface.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-create_ipv6" class="anchored"><a href="#val-create_ipv6" class="anchor"></a><code><span><span class="keyword">val</span> create_ipv6 : <span>?random:<span><a href="#type-random">random</a> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span>?time:<span><a href="#type-time">time</a> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span>?clock:<span><a href="#type-mclock">mclock</a> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span>?group:string <span class="arrow">&#45;&gt;</span></span> <span>?config:<a href="#type-ipv6_config">ipv6_config</a> <span class="arrow">&#45;&gt;</span></span>
<span>?no_init:<span>bool <a href="Key/index.html#type-key">Key.key</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><a href="#type-network">network</a> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><a href="#type-ethernet">ethernet</a> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-ipv6">ipv6</a> <a href="#type-impl">impl</a></span></span></code></div><div class="spec-doc"><p>Use an IPv6 address. Exposes the keys <a href="../Mirage_key/V6/index.html#val-network"><code>Key.V6.network</code></a> and <a href="../Mirage_key/V6/index.html#val-gateway"><code>Key.V6.gateway</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-create_ipv4v6" class="anchored"><a href="#val-create_ipv4v6" class="anchor"></a><code><span><span class="keyword">val</span> create_ipv4v6 : <span>?group:string <span class="arrow">&#45;&gt;</span></span> <span><span><a href="#type-ipv4">ipv4</a> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><a href="#type-ipv6">ipv6</a> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-ipv4v6">ipv4v6</a> <a href="#type-impl">impl</a></span></span></code></div></div><h3 id="udp-configuration"><a href="#udp-configuration" class="anchor"></a>UDP configuration</h3><div class="odoc-spec"><div class="spec type" id="type-udp" class="anchored"><a href="#type-udp" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a udp</span></span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-udpv4" class="anchored"><a href="#type-udpv4" class="anchor"></a><code><span><span class="keyword">type</span> udpv4</span><span> = <span><a href="#type-v4">v4</a> <a href="#type-udp">udp</a></span></span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-udpv6" class="anchored"><a href="#type-udpv6" class="anchor"></a><code><span><span class="keyword">type</span> udpv6</span><span> = <span><a href="#type-v6">v6</a> <a href="#type-udp">udp</a></span></span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-udpv4v6" class="anchored"><a href="#type-udpv4v6" class="anchor"></a><code><span><span class="keyword">type</span> udpv4v6</span><span> = <span><a href="#type-v4v6">v4v6</a> <a href="#type-udp">udp</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-udp" class="anchored"><a href="#val-udp" class="anchor"></a><code><span><span class="keyword">val</span> udp : <span><span><span class="type-var">'a</span> <a href="#type-udp">udp</a></span> <a href="#type-typ">typ</a></span></span></code></div><div class="spec-doc"><p>Implementation of the <code>Mirage_types.UDP</code> signature.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-udpv4" class="anchored"><a href="#val-udpv4" class="anchor"></a><code><span><span class="keyword">val</span> udpv4 : <span><a href="#type-udpv4">udpv4</a> <a href="#type-typ">typ</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-udpv6" class="anchored"><a href="#val-udpv6" class="anchor"></a><code><span><span class="keyword">val</span> udpv6 : <span><a href="#type-udpv6">udpv6</a> <a href="#type-typ">typ</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-udpv4v6" class="anchored"><a href="#val-udpv4v6" class="anchor"></a><code><span><span class="keyword">val</span> udpv4v6 : <span><a href="#type-udpv4v6">udpv4v6</a> <a href="#type-typ">typ</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-direct_udp" class="anchored"><a href="#val-direct_udp" class="anchor"></a><code><span><span class="keyword">val</span> direct_udp : <span>?random:<span><a href="#type-random">random</a> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span><span class="type-var">'a</span> <a href="#type-ip">ip</a></span> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-udp">udp</a></span> <a href="#type-impl">impl</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-socket_udpv4" class="anchored"><a href="#val-socket_udpv4" class="anchor"></a><code><span><span class="keyword">val</span> socket_udpv4 : <span>?group:string <span class="arrow">&#45;&gt;</span></span> <span><span><span class="xref-unresolved">Ipaddr</span>.V4.t option</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-udpv4">udpv4</a> <a href="#type-impl">impl</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-socket_udpv6" class="anchored"><a href="#val-socket_udpv6" class="anchor"></a><code><span><span class="keyword">val</span> socket_udpv6 : <span>?group:string <span class="arrow">&#45;&gt;</span></span> <span><span><span class="xref-unresolved">Ipaddr</span>.V6.t option</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-udpv6">udpv6</a> <a href="#type-impl">impl</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-socket_udpv4v6" class="anchored"><a href="#val-socket_udpv4v6" class="anchor"></a><code><span><span class="keyword">val</span> socket_udpv4v6 : <span>?group:string <span class="arrow">&#45;&gt;</span></span> <span><span><span class="xref-unresolved">Ipaddr</span>.V4.t option</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="xref-unresolved">Ipaddr</span>.V6.t option</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-udpv4v6">udpv4v6</a> <a href="#type-impl">impl</a></span></span></code></div></div><h3 id="tcp-configuration"><a href="#tcp-configuration" class="anchor"></a>TCP configuration</h3><div class="odoc-spec"><div class="spec type" id="type-tcp" class="anchored"><a href="#type-tcp" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a tcp</span></span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-tcpv4" class="anchored"><a href="#type-tcpv4" class="anchor"></a><code><span><span class="keyword">type</span> tcpv4</span><span> = <span><a href="#type-v4">v4</a> <a href="#type-tcp">tcp</a></span></span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-tcpv6" class="anchored"><a href="#type-tcpv6" class="anchor"></a><code><span><span class="keyword">type</span> tcpv6</span><span> = <span><a href="#type-v6">v6</a> <a href="#type-tcp">tcp</a></span></span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-tcpv4v6" class="anchored"><a href="#type-tcpv4v6" class="anchor"></a><code><span><span class="keyword">type</span> tcpv4v6</span><span> = <span><a href="#type-v4v6">v4v6</a> <a href="#type-tcp">tcp</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-tcp" class="anchored"><a href="#val-tcp" class="anchor"></a><code><span><span class="keyword">val</span> tcp : <span><span><span class="type-var">'a</span> <a href="#type-tcp">tcp</a></span> <a href="#type-typ">typ</a></span></span></code></div><div class="spec-doc"><p>Implementation of the <code>Mirage_types.TCP</code> signature.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-tcpv4" class="anchored"><a href="#val-tcpv4" class="anchor"></a><code><span><span class="keyword">val</span> tcpv4 : <span><a href="#type-tcpv4">tcpv4</a> <a href="#type-typ">typ</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-tcpv6" class="anchored"><a href="#val-tcpv6" class="anchor"></a><code><span><span class="keyword">val</span> tcpv6 : <span><a href="#type-tcpv6">tcpv6</a> <a href="#type-typ">typ</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-tcpv4v6" class="anchored"><a href="#val-tcpv4v6" class="anchor"></a><code><span><span class="keyword">val</span> tcpv4v6 : <span><a href="#type-tcpv4v6">tcpv4v6</a> <a href="#type-typ">typ</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-direct_tcp" class="anchored"><a href="#val-direct_tcp" class="anchor"></a><code><span><span class="keyword">val</span> direct_tcp : <span>?clock:<span><a href="#type-mclock">mclock</a> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span>?random:<span><a href="#type-random">random</a> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span>?time:<span><a href="#type-time">time</a> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span><span class="type-var">'a</span> <a href="#type-ip">ip</a></span> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-tcp">tcp</a></span> <a href="#type-impl">impl</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-socket_tcpv4" class="anchored"><a href="#val-socket_tcpv4" class="anchor"></a><code><span><span class="keyword">val</span> socket_tcpv4 : <span>?group:string <span class="arrow">&#45;&gt;</span></span> <span><span><span class="xref-unresolved">Ipaddr</span>.V4.t option</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-tcpv4">tcpv4</a> <a href="#type-impl">impl</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-socket_tcpv6" class="anchored"><a href="#val-socket_tcpv6" class="anchor"></a><code><span><span class="keyword">val</span> socket_tcpv6 : <span>?group:string <span class="arrow">&#45;&gt;</span></span> <span><span><span class="xref-unresolved">Ipaddr</span>.V6.t option</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-tcpv6">tcpv6</a> <a href="#type-impl">impl</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-socket_tcpv4v6" class="anchored"><a href="#val-socket_tcpv4v6" class="anchor"></a><code><span><span class="keyword">val</span> socket_tcpv4v6 : <span>?group:string <span class="arrow">&#45;&gt;</span></span> <span><span><span class="xref-unresolved">Ipaddr</span>.V4.t option</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="xref-unresolved">Ipaddr</span>.V6.t option</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-tcpv4v6">tcpv4v6</a> <a href="#type-impl">impl</a></span></span></code></div></div><h3 id="network-stack-configuration"><a href="#network-stack-configuration" class="anchor"></a>Network stack configuration</h3><div class="odoc-spec"><div class="spec type" id="type-stackv4" class="anchored"><a href="#type-stackv4" class="anchor"></a><code><span><span class="keyword">type</span> stackv4</span></code></div><div class="spec-doc"><p>IPv4</p></div></div><div class="odoc-spec"><div class="spec value" id="val-stackv4" class="anchored"><a href="#val-stackv4" class="anchor"></a><code><span><span class="keyword">val</span> stackv4 : <span><a href="#type-stackv4">stackv4</a> <a href="#type-typ">typ</a></span></span></code></div><div class="spec-doc"><p>Implementation of the <code>Mirage_types.STACKV4</code> signature.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-direct_stackv4" class="anchored"><a href="#val-direct_stackv4" class="anchor"></a><code><span><span class="keyword">val</span> direct_stackv4 : <span>?clock:<span><a href="#type-mclock">mclock</a> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span>?random:<span><a href="#type-random">random</a> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span>?time:<span><a href="#type-time">time</a> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span>?group:string <span class="arrow">&#45;&gt;</span></span>
<span><span><a href="#type-network">network</a> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><a href="#type-ethernet">ethernet</a> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><a href="#type-arpv4">arpv4</a> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><a href="#type-ipv4">ipv4</a> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-stackv4">stackv4</a> <a href="#type-impl">impl</a></span></span></code></div><div class="spec-doc"><p>Direct network stack with given ip.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-socket_stackv4" class="anchored"><a href="#val-socket_stackv4" class="anchor"></a><code><span><span class="keyword">val</span> socket_stackv4 : <span>?group:string <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-stackv4">stackv4</a> <a href="#type-impl">impl</a></span></span></code></div><div class="spec-doc"><p>Network stack with sockets.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-qubes_ipv4_stack" class="anchored"><a href="#val-qubes_ipv4_stack" class="anchor"></a><code><span><span class="keyword">val</span> qubes_ipv4_stack : <span>?group:string <span class="arrow">&#45;&gt;</span></span> <span>?qubesdb:<span><a href="#type-qubesdb">qubesdb</a> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span>?arp:<span>(<span><span><a href="#type-ethernet">ethernet</a> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-arpv4">arpv4</a> <a href="#type-impl">impl</a></span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span><a href="#type-network">network</a> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-stackv4">stackv4</a> <a href="#type-impl">impl</a></span></span></code></div><div class="spec-doc"><p>Build a stackv4 by looking up configuration information via QubesDB, * building an ipv4, then building a stack on top of that.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-dhcp_ipv4_stack" class="anchored"><a href="#val-dhcp_ipv4_stack" class="anchor"></a><code><span><span class="keyword">val</span> dhcp_ipv4_stack : <span>?group:string <span class="arrow">&#45;&gt;</span></span> <span>?random:<span><a href="#type-random">random</a> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span>?clock:<span><a href="#type-mclock">mclock</a> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span>?time:<span><a href="#type-time">time</a> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span>
<span>?arp:<span>(<span><span><a href="#type-ethernet">ethernet</a> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-arpv4">arpv4</a> <a href="#type-impl">impl</a></span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span><a href="#type-network">network</a> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-stackv4">stackv4</a> <a href="#type-impl">impl</a></span></span></code></div><div class="spec-doc"><p>Build a stackv4 by obtaining a DHCP lease, using the lease to * build an ipv4, then building a stack on top of that.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-static_ipv4_stack" class="anchored"><a href="#val-static_ipv4_stack" class="anchor"></a><code><span><span class="keyword">val</span> static_ipv4_stack : <span>?group:string <span class="arrow">&#45;&gt;</span></span> <span>?config:<a href="#type-ipv4_config">ipv4_config</a> <span class="arrow">&#45;&gt;</span></span> <span>?arp:<span>(<span><span><a href="#type-ethernet">ethernet</a> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-arpv4">arpv4</a> <a href="#type-impl">impl</a></span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span><a href="#type-network">network</a> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-stackv4">stackv4</a> <a href="#type-impl">impl</a></span></span></code></div><div class="spec-doc"><p>Build a stackv4 by checking the <a href="../Mirage_key/V4/index.html#val-network"><code>Key.V4.network</code></a>, and <a href="../Mirage_key/V4/index.html#val-gateway"><code>Key.V4.gateway</code></a> keys * for ipv4 configuration information, filling in unspecified information from <code>?config</code>, * then building a stack on top of that.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-generic_stackv4" class="anchored"><a href="#val-generic_stackv4" class="anchor"></a><code><span><span class="keyword">val</span> generic_stackv4 : <span>?group:string <span class="arrow">&#45;&gt;</span></span> <span>?config:<a href="#type-ipv4_config">ipv4_config</a> <span class="arrow">&#45;&gt;</span></span> <span>?dhcp_key:<span>bool <a href="#type-value">value</a></span> <span class="arrow">&#45;&gt;</span></span>
<span>?net_key:<span><span><span>[ `Direct <span>| `Socket</span> ]</span> option</span> <a href="#type-value">value</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><a href="#type-network">network</a> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-stackv4">stackv4</a> <a href="#type-impl">impl</a></span></span></code></div><div class="spec-doc"><p>Generic stack using a <code>dhcp</code> and a <code>net</code> keys: <a href="Key/index.html#val-net"><code>Key.net</code></a> and <a href="Key/index.html#val-dhcp"><code>Key.dhcp</code></a>.</p><ul><li>If <code>target</code> = <code>Qubes</code> then <a href="#val-qubes_ipv4_stack"><code>qubes_ipv4_stack</code></a> is used</li><li>Else, if <code>net</code> = <code>socket</code> then <a href="#val-socket_stackv4"><code>socket_stackv4</code></a> is used</li><li>Else, if <code>dhcp</code> then <a href="#val-dhcp_ipv4_stack"><code>dhcp_ipv4_stack</code></a> is used</li><li>Else, if <code>unix or macosx</code> then <a href="#val-socket_stackv4"><code>socket_stackv4</code></a> is used</li><li>Else, <a href="#val-static_ipv4_stack"><code>static_ipv4_stack</code></a> is used.</li></ul><p>If a key is not provided, it uses <a href="Key/index.html#val-net"><code>Key.net</code></a> or <a href="Key/index.html#val-dhcp"><code>Key.dhcp</code></a> (with the <code>group</code> argument) to create it.</p></div></div><h4 id="ipv6"><a href="#ipv6" class="anchor"></a>IPv6</h4><div class="odoc-spec"><div class="spec type" id="type-stackv6" class="anchored"><a href="#type-stackv6" class="anchor"></a><code><span><span class="keyword">type</span> stackv6</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-stackv6" class="anchored"><a href="#val-stackv6" class="anchor"></a><code><span><span class="keyword">val</span> stackv6 : <span><a href="#type-stackv6">stackv6</a> <a href="#type-typ">typ</a></span></span></code></div><div class="spec-doc"><p>Implementation of the <code>Mirage_stack.V6</code> signature.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-direct_stackv6" class="anchored"><a href="#val-direct_stackv6" class="anchor"></a><code><span><span class="keyword">val</span> direct_stackv6 : <span>?clock:<span><a href="#type-mclock">mclock</a> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span>?random:<span><a href="#type-random">random</a> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span>?time:<span><a href="#type-time">time</a> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span>?group:string <span class="arrow">&#45;&gt;</span></span> <span><span><a href="#type-network">network</a> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><a href="#type-ethernet">ethernet</a> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><a href="#type-ipv6">ipv6</a> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-stackv6">stackv6</a> <a href="#type-impl">impl</a></span></span></code></div><div class="spec-doc"><p>Direct network stack with given ip.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-socket_stackv6" class="anchored"><a href="#val-socket_stackv6" class="anchor"></a><code><span><span class="keyword">val</span> socket_stackv6 : <span>?group:string <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-stackv6">stackv6</a> <a href="#type-impl">impl</a></span></span></code></div><div class="spec-doc"><p>Network stack with sockets.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-static_ipv6_stack" class="anchored"><a href="#val-static_ipv6_stack" class="anchor"></a><code><span><span class="keyword">val</span> static_ipv6_stack : <span>?group:string <span class="arrow">&#45;&gt;</span></span> <span>?config:<a href="#type-ipv6_config">ipv6_config</a> <span class="arrow">&#45;&gt;</span></span> <span><span><a href="#type-network">network</a> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-stackv6">stackv6</a> <a href="#type-impl">impl</a></span></span></code></div><div class="spec-doc"><p>Build a stackv6 by checking the <a href="../Mirage_key/V6/index.html#val-network"><code>Key.V6.network</code></a>, and <a href="../Mirage_key/V6/index.html#val-gateway"><code>Key.V6.gateway</code></a> keys for ipv6 configuration information, filling in unspecified information from <code>?config</code>, then building a stack on top of that.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-generic_stackv6" class="anchored"><a href="#val-generic_stackv6" class="anchor"></a><code><span><span class="keyword">val</span> generic_stackv6 : <span>?group:string <span class="arrow">&#45;&gt;</span></span> <span>?config:<a href="#type-ipv6_config">ipv6_config</a> <span class="arrow">&#45;&gt;</span></span>
<span>?net_key:<span><span><span>[ `Direct <span>| `Socket</span> ]</span> option</span> <a href="#type-value">value</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><a href="#type-network">network</a> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-stackv6">stackv6</a> <a href="#type-impl">impl</a></span></span></code></div><div class="spec-doc"><p>Generic stack using a <code>net</code> keys: <a href="Key/index.html#val-net"><code>Key.net</code></a>.</p><ul><li>If <code>net</code> = <code>socket</code> then <a href="#val-socket_stackv6"><code>socket_stackv6</code></a> is used</li><li>Else, if <code>unix or macosx</code> then <a href="#val-socket_stackv6"><code>socket_stackv6</code></a> is used</li><li>Else, <a href="#val-static_ipv6_stack"><code>static_ipv6_stack</code></a> is used.</li></ul><p>If a key is not provided, it uses <a href="Key/index.html#val-net"><code>Key.net</code></a> (with the <code>group</code> argument) to create it.</p></div></div><h4 id="dual-ipv4-and-ipv6"><a href="#dual-ipv4-and-ipv6" class="anchor"></a>Dual IPv4 and IPv6</h4><div class="odoc-spec"><div class="spec type" id="type-stackv4v6" class="anchored"><a href="#type-stackv4v6" class="anchor"></a><code><span><span class="keyword">type</span> stackv4v6</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-stackv4v6" class="anchored"><a href="#val-stackv4v6" class="anchor"></a><code><span><span class="keyword">val</span> stackv4v6 : <span><a href="#type-stackv4v6">stackv4v6</a> <a href="#type-typ">typ</a></span></span></code></div><div class="spec-doc"><p>Implementation of the <code>Mirage_stack.V4V6</code> signature.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-direct_stackv4v6" class="anchored"><a href="#val-direct_stackv4v6" class="anchor"></a><code><span><span class="keyword">val</span> direct_stackv4v6 : <span>?clock:<span><a href="#type-mclock">mclock</a> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span>?random:<span><a href="#type-random">random</a> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span>?time:<span><a href="#type-time">time</a> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span>?group:string <span class="arrow">&#45;&gt;</span></span>
<span>ipv4_only:<span>bool <a href="Key/index.html#type-key">Key.key</a></span> <span class="arrow">&#45;&gt;</span></span> <span>ipv6_only:<span>bool <a href="Key/index.html#type-key">Key.key</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><a href="#type-network">network</a> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><a href="#type-ethernet">ethernet</a> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><a href="#type-arpv4">arpv4</a> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><a href="#type-ipv4">ipv4</a> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><a href="#type-ipv6">ipv6</a> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-stackv4v6">stackv4v6</a> <a href="#type-impl">impl</a></span></span></code></div><div class="spec-doc"><p>Direct network stack with given ip.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-socket_stackv4v6" class="anchored"><a href="#val-socket_stackv4v6" class="anchor"></a><code><span><span class="keyword">val</span> socket_stackv4v6 : <span>?group:string <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-stackv4v6">stackv4v6</a> <a href="#type-impl">impl</a></span></span></code></div><div class="spec-doc"><p>Network stack with sockets.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-static_ipv4v6_stack" class="anchored"><a href="#val-static_ipv4v6_stack" class="anchor"></a><code><span><span class="keyword">val</span> static_ipv4v6_stack : <span>?group:string <span class="arrow">&#45;&gt;</span></span> <span>?ipv6_config:<a href="#type-ipv6_config">ipv6_config</a> <span class="arrow">&#45;&gt;</span></span> <span>?ipv4_config:<a href="#type-ipv4_config">ipv4_config</a> <span class="arrow">&#45;&gt;</span></span>
<span>?arp:<span>(<span><span><a href="#type-ethernet">ethernet</a> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-arpv4">arpv4</a> <a href="#type-impl">impl</a></span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span><a href="#type-network">network</a> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-stackv4v6">stackv4v6</a> <a href="#type-impl">impl</a></span></span></code></div><div class="spec-doc"><p>Build a stackv4v6 by checking the <a href="../Mirage_key/V6/index.html#val-network"><code>Key.V6.network</code></a>, and <a href="../Mirage_key/V6/index.html#val-gateway"><code>Key.V6.gateway</code></a> keys for IPv4 and IPv6 configuration information, filling in unspecified information from <code>?config</code>, then building a stack on top of that.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-generic_stackv4v6" class="anchored"><a href="#val-generic_stackv4v6" class="anchor"></a><code><span><span class="keyword">val</span> generic_stackv4v6 : <span>?group:string <span class="arrow">&#45;&gt;</span></span> <span>?ipv6_config:<a href="#type-ipv6_config">ipv6_config</a> <span class="arrow">&#45;&gt;</span></span> <span>?ipv4_config:<a href="#type-ipv4_config">ipv4_config</a> <span class="arrow">&#45;&gt;</span></span>
<span>?dhcp_key:<span>bool <a href="#type-value">value</a></span> <span class="arrow">&#45;&gt;</span></span> <span>?net_key:<span><span><span>[ `Direct <span>| `Socket</span> ]</span> option</span> <a href="#type-value">value</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><a href="#type-network">network</a> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-stackv4v6">stackv4v6</a> <a href="#type-impl">impl</a></span></span></code></div><div class="spec-doc"><p>Generic stack using a <code>net</code> keys: <a href="Key/index.html#val-net"><code>Key.net</code></a>.</p><ul><li>If <code>net</code> = <code>socket</code> then <a href="#val-socket_stackv4v6"><code>socket_stackv4v6</code></a> is used</li><li>Else, if <code>unix or macosx</code> then <a href="#val-socket_stackv4v6"><code>socket_stackv4v6</code></a> is used</li><li>Else, <a href="#val-static_ipv4v6_stack"><code>static_ipv4v6_stack</code></a> is used.</li></ul><p>If a key is not provided, it uses <a href="Key/index.html#val-net"><code>Key.net</code></a> (with the <code>group</code> argument) to create it.</p></div></div><h3 id="resolver-configuration"><a href="#resolver-configuration" class="anchor"></a>Resolver configuration</h3><div class="odoc-spec"><div class="spec type" id="type-resolver" class="anchored"><a href="#type-resolver" class="anchor"></a><code><span><span class="keyword">type</span> resolver</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-resolver" class="anchored"><a href="#val-resolver" class="anchor"></a><code><span><span class="keyword">val</span> resolver : <span><a href="#type-resolver">resolver</a> <a href="#type-typ">typ</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-resolver_dns" class="anchored"><a href="#val-resolver_dns" class="anchor"></a><code><span><span class="keyword">val</span> resolver_dns : <span>?ns:<span class="xref-unresolved">Ipaddr</span>.t <span class="arrow">&#45;&gt;</span></span> <span>?ns_port:int <span class="arrow">&#45;&gt;</span></span> <span>?random:<span><a href="#type-random">random</a> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span>?time:<span><a href="#type-time">time</a> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span>?mclock:<span><a href="#type-mclock">mclock</a> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span>
<span>?pclock:<span><a href="#type-pclock">pclock</a> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><a href="#type-stackv4v6">stackv4v6</a> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-resolver">resolver</a> <a href="#type-impl">impl</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-resolver_unix_system" class="anchored"><a href="#val-resolver_unix_system" class="anchor"></a><code><span><span class="keyword">val</span> resolver_unix_system : <span><a href="#type-resolver">resolver</a> <a href="#type-impl">impl</a></span></span></code></div></div><h3 id="syslog-configuration"><a href="#syslog-configuration" class="anchor"></a>Syslog configuration</h3><p>Syslog exfiltrates log messages (generated by libraries using the <code>logs</code> library) via a network connection. The log level of the log sources is controlled via the <a href="../Mirage_key/index.html#val-logs"><code>Mirage_key.logs</code></a> key. The functionality is provided by the <code>logs-syslog</code> package.</p><div class="odoc-spec"><div class="spec type" id="type-syslog_config" class="anchored"><a href="#type-syslog_config" class="anchor"></a><code><span><span class="keyword">type</span> syslog_config</span><span> = </span><span>{</span></code><table><tr id="type-syslog_config.hostname" class="anchored"><td class="def record field"><a href="#type-syslog_config.hostname" class="anchor"></a><code><span>hostname : string;</span></code></td></tr><tr id="type-syslog_config.server" class="anchored"><td class="def record field"><a href="#type-syslog_config.server" class="anchor"></a><code><span>server : <span><span class="xref-unresolved">Ipaddr</span>.t option</span>;</span></code></td></tr><tr id="type-syslog_config.port" class="anchored"><td class="def record field"><a href="#type-syslog_config.port" class="anchor"></a><code><span>port : <span>int option</span>;</span></code></td></tr><tr id="type-syslog_config.truncate" class="anchored"><td class="def record field"><a href="#type-syslog_config.truncate" class="anchor"></a><code><span>truncate : <span>int option</span>;</span></code></td></tr></table><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-syslog_config" class="anchored"><a href="#val-syslog_config" class="anchor"></a><code><span><span class="keyword">val</span> syslog_config : <span>?port:int <span class="arrow">&#45;&gt;</span></span> <span>?truncate:int <span class="arrow">&#45;&gt;</span></span> <span>?server:<span class="xref-unresolved">Ipaddr</span>.t <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <a href="#type-syslog_config">syslog_config</a></span></code></div><div class="spec-doc"><p>Helper for constructing a <a href="#val-syslog_config"><code>syslog_config</code></a>.</p></div></div><div class="odoc-spec"><div class="spec type" id="type-syslog" class="anchored"><a href="#type-syslog" class="anchor"></a><code><span><span class="keyword">type</span> syslog</span></code></div><div class="spec-doc"><p>The type for syslog</p></div></div><div class="odoc-spec"><div class="spec value" id="val-syslog" class="anchored"><a href="#val-syslog" class="anchor"></a><code><span><span class="keyword">val</span> syslog : <span><a href="#type-syslog">syslog</a> <a href="#type-typ">typ</a></span></span></code></div><div class="spec-doc"><p>Implementation of the <a href="#val-syslog"><code>syslog</code></a> type.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-syslog_udp" class="anchored"><a href="#val-syslog_udp" class="anchor"></a><code><span><span class="keyword">val</span> syslog_udp : <span>?config:<a href="#type-syslog_config">syslog_config</a> <span class="arrow">&#45;&gt;</span></span> <span>?console:<span><a href="#type-console">console</a> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span>?clock:<span><a href="#type-pclock">pclock</a> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><a href="#type-stackv4v6">stackv4v6</a> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-syslog">syslog</a> <a href="#type-impl">impl</a></span></span></code></div><div class="spec-doc"><p>Emit log messages via UDP to the configured host.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-syslog_tcp" class="anchored"><a href="#val-syslog_tcp" class="anchor"></a><code><span><span class="keyword">val</span> syslog_tcp : <span>?config:<a href="#type-syslog_config">syslog_config</a> <span class="arrow">&#45;&gt;</span></span> <span>?console:<span><a href="#type-console">console</a> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span>?clock:<span><a href="#type-pclock">pclock</a> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><a href="#type-stackv4v6">stackv4v6</a> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-syslog">syslog</a> <a href="#type-impl">impl</a></span></span></code></div><div class="spec-doc"><p>Emit log messages via TCP to the configured host.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-syslog_tls" class="anchored"><a href="#val-syslog_tls" class="anchor"></a><code><span><span class="keyword">val</span> syslog_tls : <span>?config:<a href="#type-syslog_config">syslog_config</a> <span class="arrow">&#45;&gt;</span></span> <span>?keyname:string <span class="arrow">&#45;&gt;</span></span> <span>?console:<span><a href="#type-console">console</a> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span>?clock:<span><a href="#type-pclock">pclock</a> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><a href="#type-stackv4v6">stackv4v6</a> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><a href="#type-kv_ro">kv_ro</a> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-syslog">syslog</a> <a href="#type-impl">impl</a></span></span></code></div><div class="spec-doc"><p>Emit log messages via TLS to the configured host, using the credentials (private ekey, certificate, trust anchor) provided in the KV_RO using the <code>keyname</code>.</p></div></div><h3 id="entropy"><a href="#entropy" class="anchor"></a>Entropy</h3><div class="odoc-spec"><div class="spec value" id="val-nocrypto" class="anchored"><a href="#val-nocrypto" class="anchor"></a><code><span><span class="keyword">val</span> nocrypto : <span><a href="#type-job">job</a> <a href="#type-impl">impl</a></span></span></code></div><div class="spec-doc"><p>Device that initializes the entropy. Deprecated and unused.</p></div></div><h3 id="conduit-configuration"><a href="#conduit-configuration" class="anchor"></a>Conduit configuration</h3><div class="odoc-spec"><div class="spec type" id="type-conduit" class="anchored"><a href="#type-conduit" class="anchor"></a><code><span><span class="keyword">type</span> conduit</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-conduit" class="anchored"><a href="#val-conduit" class="anchor"></a><code><span><span class="keyword">val</span> conduit : <span><a href="#type-conduit">conduit</a> <a href="#type-typ">typ</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-conduit_direct" class="anchored"><a href="#val-conduit_direct" class="anchor"></a><code><span><span class="keyword">val</span> conduit_direct : <span>?tls:bool <span class="arrow">&#45;&gt;</span></span> <span>?random:<span><a href="#type-random">random</a> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><a href="#type-stackv4v6">stackv4v6</a> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-conduit">conduit</a> <a href="#type-impl">impl</a></span></span></code></div></div><h3 id="http-configuration"><a href="#http-configuration" class="anchor"></a>HTTP configuration</h3><div class="odoc-spec"><div class="spec type" id="type-http" class="anchored"><a href="#type-http" class="anchor"></a><code><span><span class="keyword">type</span> http</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-http" class="anchored"><a href="#val-http" class="anchor"></a><code><span><span class="keyword">val</span> http : <span><a href="#type-http">http</a> <a href="#type-typ">typ</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-http_server" class="anchored"><a href="#val-http_server" class="anchor"></a><code><span><span class="keyword">val</span> http_server : <span><span><a href="#type-conduit">conduit</a> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-http">http</a> <a href="#type-impl">impl</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-cohttp_server" class="anchored"><a href="#val-cohttp_server" class="anchor"></a><code><span><span class="keyword">val</span> cohttp_server : <span><span><a href="#type-conduit">conduit</a> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-http">http</a> <a href="#type-impl">impl</a></span></span></code></div><div class="spec-doc"><p><code>cohttp_server</code> starts a Cohttp server.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-httpaf_server" class="anchored"><a href="#val-httpaf_server" class="anchor"></a><code><span><span class="keyword">val</span> httpaf_server : <span><span><a href="#type-conduit">conduit</a> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-http">http</a> <a href="#type-impl">impl</a></span></span></code></div><div class="spec-doc"><p><code>httpaf_server</code> starts a http/af server.</p></div></div><div class="odoc-spec"><div class="spec type" id="type-http_client" class="anchored"><a href="#type-http_client" class="anchor"></a><code><span><span class="keyword">type</span> http_client</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-http_client" class="anchored"><a href="#val-http_client" class="anchor"></a><code><span><span class="keyword">val</span> http_client : <span><a href="#type-http_client">http_client</a> <a href="#type-typ">typ</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-cohttp_client" class="anchored"><a href="#val-cohttp_client" class="anchor"></a><code><span><span class="keyword">val</span> cohttp_client : <span>?pclock:<span><a href="#type-pclock">pclock</a> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><a href="#type-resolver">resolver</a> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><a href="#type-conduit">conduit</a> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-http_client">http_client</a> <a href="#type-impl">impl</a></span></span></code></div><div class="spec-doc"><p><code>cohttp_server</code> starts a Cohttp server.</p></div></div><h3 id="argv-configuration"><a href="#argv-configuration" class="anchor"></a>Argv configuration</h3><div class="odoc-spec"><div class="spec value" id="val-default_argv" class="anchored"><a href="#val-default_argv" class="anchor"></a><code><span><span class="keyword">val</span> default_argv : <span><span class="xref-unresolved">Functoria_app</span>.argv <a href="#type-impl">impl</a></span></span></code></div><div class="spec-doc"><p><code>default_argv</code> is a dynamic argv implementation * which attempts to do something reasonable based on the target.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-no_argv" class="anchored"><a href="#val-no_argv" class="anchor"></a><code><span><span class="keyword">val</span> no_argv : <span><span class="xref-unresolved">Functoria_app</span>.argv <a href="#type-impl">impl</a></span></span></code></div><div class="spec-doc"><p><code>no_argv</code> Disable command line parsing and set argv to <code>|&quot;&quot;|</code>.</p></div></div><h3 id="other-devices"><a href="#other-devices" class="anchor"></a>Other devices</h3><div class="odoc-spec"><div class="spec value" id="val-noop" class="anchored"><a href="#val-noop" class="anchor"></a><code><span><span class="keyword">val</span> noop : <span><a href="#type-job">job</a> <a href="#type-impl">impl</a></span></span></code></div><div class="spec-doc"><p><code>noop</code> is a job that does nothing, has no dependency and returns <code>()</code></p></div></div><div class="odoc-spec"><div class="spec type" id="type-info" class="anchored"><a href="#type-info" class="anchor"></a><code><span><span class="keyword">type</span> info</span></code></div><div class="spec-doc"><p><code>info</code> is the type for module implementing <code>Mirage_runtime</code>.Info.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-info" class="anchored"><a href="#val-info" class="anchor"></a><code><span><span class="keyword">val</span> info : <span><a href="#type-info">info</a> <a href="#type-typ">typ</a></span></span></code></div><div class="spec-doc"><p><code>info</code> is the combinator to generate <a href="#val-info"><code>info</code></a> values to use at runtime.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-app_info" class="anchored"><a href="#val-app_info" class="anchor"></a><code><span><span class="keyword">val</span> app_info : <span><a href="#type-info">info</a> <a href="#type-impl">impl</a></span></span></code></div><div class="spec-doc"><p><code>app_info</code> exports all the information available at configure time into a runtime <code>Mirage</code>.Info.t value.</p></div></div><h3 id="application-registering"><a href="#application-registering" class="anchor"></a>Application registering</h3><div class="odoc-spec"><div class="spec value" id="val-register" class="anchored"><a href="#val-register" class="anchor"></a><code><span><span class="keyword">val</span> register : <span>?argv:<span><span class="xref-unresolved">Functoria_app</span>.argv <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span>?tracing:<span><a href="#type-tracing">tracing</a> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span>?reporter:<span><a href="#type-reporter">reporter</a> <a href="#type-impl">impl</a></span> <span class="arrow">&#45;&gt;</span></span> <span>?keys:<span><a href="Key/index.html#type-t">Key.t</a> list</span> <span class="arrow">&#45;&gt;</span></span>
<span>?packages:<span><span class="xref-unresolved">Functoria</span>.package list</span> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><span><span><a href="#type-job">job</a> <a href="#type-impl">impl</a></span> list</span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>register name jobs</code> registers the application named by <code>name</code> which will executes the given <code>jobs</code>.</p><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">packages</span> <p>The opam packages needed by this module.</p></li></ul><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">keys</span> <p>The keys related to this module.</p></li></ul><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">tracing</span> <p>Enable tracing.</p></li></ul><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">reporter</span> <p>Configure logging. The default log reporter is <code>default_reporter</code>. To disable logging, use <code>no_reporter</code>.</p></li></ul><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">argv</span> <p>Configure command-line argument parsing. The default parser is <code>default_argv</code>. To disable command-line parsing, use <code>no_argv</code>.</p></li></ul></div></div></div></body></html>